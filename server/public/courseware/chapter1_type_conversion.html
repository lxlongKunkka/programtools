<!doctype html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C++ 类型范围与转换 - Chapter 1</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.5.0/reveal.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.5.0/theme/league.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/monokai.min.css">
    <style>
        .reveal h1, .reveal h2, .reveal h3 { text-transform: none; }
        .reveal p, .reveal li { font-size: 30px; line-height: 1.6; }
        .code-box {
            background: #272822;
            border-radius: 8px;
            padding: 20px;
            text-align: left;
            margin: 20px auto;
            width: 80%;
        }
        .highlight { color: #e74c3c; font-weight: bold; }
        .range-table {
            width: 90%;
            margin: 0 auto;
            border-collapse: collapse;
            font-size: 0.7em;
        }
        .range-table th, .range-table td {
            border: 1px solid #fff;
            padding: 10px;
            text-align: center;
        }
        .range-table th { background-color: #42b983; color: black; }
    </style>
</head>
<body>
    <div class="reveal">
        <div class="slides">
            <!-- Slide 1: Title -->
            <section>
                <h2>数据类型范围与类型转换</h2>
                <p>sizeof, Overflow, Casting</p>
            </section>

            <!-- Slide 2: Memory Size -->
            <section>
                <h3>数据在内存中的大小</h3>
                <p>不同的数据类型占用不同的内存空间。</p>
                <p>我们可以用 <code>sizeof()</code> 运算符来查看（单位：字节 Byte）。</p>
                <div class="code-box">
                    <pre><code class="cpp">cout << sizeof(char);      // 1
cout << sizeof(int);       // 4
cout << sizeof(long long); // 8
cout << sizeof(double);    // 8</code></pre>
                </div>
            </section>

            <!-- Slide 3: Data Ranges -->
            <section>
                <h3>数据范围 (能存多大的数？)</h3>
                <table class="range-table">
                    <thead>
                        <tr>
                            <th>类型</th>
                            <th>字节</th>
                            <th>大约范围</th>
                            <th>说明</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>char</code></td>
                            <td>1</td>
                            <td>-128 ~ 127</td>
                            <td>存字符或极小整数</td>
                        </tr>
                        <tr>
                            <td><code>int</code></td>
                            <td>4</td>
                            <td>± 21 亿 ($2 \times 10^9$)</td>
                            <td>最常用的整数</td>
                        </tr>
                        <tr>
                            <td><code>long long</code></td>
                            <td>8</td>
                            <td>± $9 \times 10^{18}$</td>
                            <td><strong>超大整数</strong>用这个</td>
                        </tr>
                        <tr>
                            <td><code>double</code></td>
                            <td>8</td>
                            <td>很大 (15位有效数字)</td>
                            <td>高精度小数</td>
                        </tr>
                    </tbody>
                </table>
                <p class="fragment highlight" style="font-size: 0.8em; margin-top: 20px;">
                    注意：如果题目数据超过 20 亿，必须用 <code>long long</code>！
                </p>
            </section>

            <!-- Slide 4: Overflow -->
            <section>
                <h3>数据溢出 (Overflow)</h3>
                <p>如果存的数超过了类型的范围，会发生什么？</p>
                <p>就像汽车里程表，999999 下一公里会变成 000000。</p>
                <div class="code-box">
                    <pre><code class="cpp">int a = 2147483647; // int 的最大值
a = a + 1;
cout << a; 
// 输出 -2147483648 (变成最小值了！)</code></pre>
                </div>
                <p class="fragment">这叫<strong>溢出</strong>，是程序中常见的 Bug 来源。</p>
            </section>

            <!-- Slide 5: Implicit Conversion -->
            <section>
                <h3>自动类型转换 (隐式)</h3>
                <p>当不同类型混合运算时，C++ 会自动把<strong>小</strong>类型转为<strong>大</strong>类型。</p>
                <div class="code-box">
                    <pre><code class="cpp">int a = 5;
double b = 2.5;
cout << a + b; 
// int(5) 自动变成 double(5.0)
// 结果是 7.5 (double)</code></pre>
                </div>
                <p>赋值时也会发生转换：</p>
                <div class="code-box">
                    <pre><code class="cpp">double d = 10;  // 10 变成 10.0
int i = 3.9;    // 3.9 变成 3 (丢失小数，不四舍五入！)</code></pre>
                </div>
            </section>

            <!-- Slide 6: Explicit Conversion -->
            <section>
                <h3>强制类型转换 (显式)</h3>
                <p>我们可以手动强制改变数据的类型。</p>
                <p>语法：<code>(类型名) 变量或数值</code></p>
                <div class="code-box">
                    <pre><code class="cpp">double pi = 3.14159;
int n = (int)pi;  // 强制把 pi 当作整数用
cout << n;        // 输出 3</code></pre>
                </div>
                <p class="fragment">常见用途：解决整数除法问题。</p>
                <div class="code-box fragment">
                    <pre><code class="cpp">int a = 5, b = 2;
cout << (double)a / b; // 5.0 / 2 = 2.5</code></pre>
                </div>
            </section>

            <!-- Slide 7: Quiz -->
            <section>
                <h3>小测验</h3>
                <p>1. <code>int a = 3.99;</code> 输出 a 的值是多少？</p>
                <div style="text-align: left; width: 60%; margin: 0 auto; font-size: 0.8em;">
                    <input type="radio" name="q1" id="q1a"> <label for="q1a">A. 3</label><br>
                    <input type="radio" name="q1" id="q1b"> <label for="q1b">B. 4</label><br>
                    <input type="radio" name="q1" id="q1c"> <label for="q1c">C. 3.99</label>
                </div>
                <br>
                <p>2. 如果要存一个 100 亿的整数，应该用什么类型？</p>
                <div style="text-align: left; width: 60%; margin: 0 auto; font-size: 0.8em;">
                    <input type="radio" name="q2" id="q2a"> <label for="q2a">A. int</label><br>
                    <input type="radio" name="q2" id="q2b"> <label for="q2b">B. long long</label><br>
                    <input type="radio" name="q2" id="q2c"> <label for="q2c">C. float</label>
                </div>
            </section>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.5.0/reveal.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.5.0/plugin/highlight/highlight.min.js"></script>
    <script>
        Reveal.initialize({
            controls: true,
            progress: true,
            center: true,
            hash: true,
            transition: 'slide',
            plugins: [ RevealHighlight ]
        });
    </script>
</body>
</html>