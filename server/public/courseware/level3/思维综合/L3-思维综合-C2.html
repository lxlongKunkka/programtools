<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ€ç»´è®­ç»ƒ - Chapter 2: é€†å‘æ€ç»´ä¸è´¡çŒ®æ³•</title>
    <style>
        /* --- åŸºç¡€å’Œå¸ƒå±€ (ä¿æŒä¸€è‡´) --- */
        html, body {
            height: 100%;
            margin: 0;
            overflow: hidden;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: #000;
        }

        .ppt-container {
            width: 100%;
            height: 100%;
            position: relative;
        }

        .slide {
            position: absolute;
            width: 100%;
            height: 100%;
            background-color: #ffffff;
            padding: 4vh 6vw;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.6s ease-in-out;
            overflow-y: auto;
        }

        .slide.active {
            opacity: 1;
            visibility: visible;
            z-index: 1;
        }

        /* --- å¯¼èˆªæŒ‰é’® --- */
        .nav-button {
            position: absolute;
            bottom: 30px;
            z-index: 10;
            background-color: rgba(156, 39, 176, 0.7); /* ç´«è‰²ç³» */
            color: white;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            transition: background-color 0.3s, transform 0.3s;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .nav-button:hover {
            background-color: #9C27B0;
            transform: scale(1.1);
        }
        #prevBtn { left: 30px; }
        #nextBtn { right: 30px; }
        #prevBtn:disabled, #nextBtn:disabled {
            background-color: #ccc;
            cursor: not-allowed;
            transform: scale(1);
        }

        /* --- é¡µé¢è®¡æ•°å™¨ --- */
        #slideCounter {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 5;
            background-color: rgba(0,0,0,0.4);
            color: white;
            padding: 5px 15px;
            border-radius: 15px;
            font-size: 14px;
        }

        /* --- å†…å®¹æ ·å¼ --- */
        h1 { font-size: clamp(2.5em, 5vw, 4em); color: #333; margin: 0; text-align: center; }
        h2 { font-size: clamp(2em, 4vw, 2.8em); color: #9C27B0; border-bottom: 3px solid #f3e5f5; padding-bottom: 15px; margin-top: 0; margin-bottom: 2vh; }
        h3 { font-size: clamp(1.2em, 2.5vw, 1.8em); color: #555; text-align: center; margin-top: 20px; }
        p, li { font-size: clamp(1em, 2vw, 1.2em); line-height: 1.6; color: #444; }
        ul { padding-left: 25px; }
        .center-content { display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; height: 100%; }
        .icon { font-size: clamp(3em, 6vw, 4.5em); margin-bottom: 20px; }
        .highlight { color: #9C27B0; font-weight: bold; }
        .conclusion { margin-top: 3vh; padding: 15px; background-color: #f3e5f5; border-left: 5px solid #9C27B0; border-radius: 4px; font-style: italic; }
        
        /* æœ¬ç« ç‰¹å®šæ ·å¼ */
        .container { display: flex; width: 100%; gap: 30px; align-items: flex-start; }
        .col { flex: 1; text-align: left; }

        /* å¡ç‰‡æ ·å¼ */
        .concept-card {
            background: #fff; border: 2px solid #eee; border-radius: 12px; padding: 20px;
            margin-bottom: 15px; box-shadow: 0 4px 6px rgba(0,0,0,0.05); text-align: center;
        }
        .concept-icon { font-size: 2.5em; display: block; margin-bottom: 10px; }

        /* çŒ´å­åƒæ¡ƒåŠ¨ç”» */
        .peach-tree {
            display: flex; justify-content: center; align-items: center; gap: 20px; margin-top: 30px;
        }
        .day-box {
            width: 80px; height: 100px; border: 2px solid #ccc; border-radius: 8px;
            display: flex; flex-direction: column; align-items: center; justify-content: flex-end;
            position: relative; background: #f9f9f9;
        }
        .day-label { position: absolute; top: -25px; font-size: 0.8em; color: #666; }
        .peach { font-size: 2em; transition: all 0.5s; }
        .peach-count { font-weight: bold; color: #9C27B0; margin-top: 5px; }
        .arrow-left { font-size: 2em; color: #999; }

        /* æ¥æ°´é—®é¢˜åŠ¨ç”» */
        .queue-line {
            display: flex; align-items: center; gap: 5px; margin-top: 30px; padding-bottom: 20px; border-bottom: 2px solid #333;
        }
        .person {
            width: 50px; height: 80px; background: #eee; border: 2px solid #999; border-radius: 5px;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            position: relative; transition: 0.3s;
        }
        .person.active { background: #E1BEE7; border-color: #9C27B0; transform: scale(1.1); }
        .time-val { font-weight: bold; font-size: 1.2em; }
        .wait-bar {
            position: absolute; bottom: -15px; height: 5px; background: #FF9800; width: 0; transition: width 0.5s;
        }
        .contribution-text {
            position: absolute; top: -40px; font-size: 0.8em; color: #FF9800; font-weight: bold; opacity: 0; transition: opacity 0.3s;
        }
        .contribution-text.show { opacity: 1; }
    </style>
</head>
<body>

    <div class="ppt-container">
        <!-- Slide 1: å°é¢ -->
        <section class="slide active" id="slide-1">
            <div class="center-content">
                <div class="icon">ğŸ”„</div>
                <h1>Chapter 2: é€†å‘æ€ç»´ä¸è´¡çŒ®æ³•</h1>
                <h3>â€”â€” â€œå€’ç€æƒ³â€çš„æ™ºæ…§</h3>
            </div>
        </section>

        <!-- Slide 2: ä¸¤ç§æ€ç»´æ¨¡å¼ -->
        <section class="slide" id="slide-2">
            <div class="slide-header">
                <h2><span style="font-size: 1.5em; vertical-align: middle;">ğŸ§ </span> ä¸¤ç§æ€ç»´æ¨¡å¼</h2>
            </div>
            <div class="slide-content">
                <div class="container">
                    <div class="col concept-card">
                        <span class="concept-icon">âª</span>
                        <h3>é€†å‘æ€ç»´</h3>
                        <p><strong>ç»ˆç‚¹ â†’ èµ·ç‚¹</strong></p>
                        <p style="font-size: 0.9em; color: #666;">å½“æ­£å‘æ¨å¯¼åˆ†æ”¯å¤ªå¤šæ—¶ï¼Œå°è¯•ä»ç»“æœåæ¨ã€‚</p>
                    </div>
                    <div class="col concept-card">
                        <span class="concept-icon">ğŸ§©</span>
                        <h3>è´¡çŒ®æ³•</h3>
                        <p><strong>æ•´ä½“ â†’ ä¸ªä½“</strong></p>
                        <p style="font-size: 0.9em; color: #666;">ä¸è®¡ç®—æ€»å’Œï¼Œè€Œæ˜¯è®¡ç®—æ¯ä¸ªå…ƒç´ è¢«ç”¨äº†å¤šå°‘æ¬¡ã€‚</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Slide 3: é€†å‘æ€ç»´ - çŒ´å­åƒæ¡ƒ -->
        <section class="slide" id="slide-3">
            <div class="slide-header">
                <h2><span style="font-size: 1.5em; vertical-align: middle;">ğŸ’</span> ç»å…¸æ¡ˆä¾‹ï¼šçŒ´å­åƒæ¡ƒ</h2>
            </div>
            <div class="slide-content">
                <p><strong>é¢˜ç›®ï¼š</strong> çŒ´å­ç¬¬ä¸€å¤©æ‘˜äº†è‹¥å¹²æ¡ƒå­ï¼Œæ¯å¤©åƒæ‰ä¸€åŠå¤šä¸€ä¸ªã€‚åˆ°ç¬¬ 4 å¤©æ—©ä¸Šæƒ³åƒæ—¶ï¼Œå‘ç°åªå‰© 1 ä¸ªäº†ã€‚</p>
                <p><strong>é—®é¢˜ï¼š</strong> ç¬¬ä¸€å¤©æ‘˜äº†å¤šå°‘ä¸ªï¼Ÿ</p>
                <div class="conclusion">
                    <strong>æ­£å‘æ€è€ƒï¼š</strong> è®¾ç¬¬ä¸€å¤© <i>x</i> ä¸ªï¼Œç¬¬äºŒå¤© <i>x</i>/2 - 1... (æ–¹ç¨‹éš¾è§£)<br>
                    <strong>é€†å‘æ€è€ƒï¼š</strong> ç¬¬ 4 å¤© 1 ä¸ª â†’ ç¬¬ 3 å¤© (1+1)Ã—2 = 4 ä¸ª... (ç®€å•é€’æ¨)
                </div>
            </div>
        </section>

        <!-- Slide 4: äº’åŠ¨ï¼šé€†å‘æ¨å¯¼æ¼”ç¤º -->
        <section class="slide" id="slide-4">
            <div class="slide-header">
                <h2><span style="font-size: 1.5em; vertical-align: middle;">ğŸ¬</span> äº’åŠ¨ï¼šæ—¶å…‰å€’æµ</h2>
            </div>
            <div class="slide-content">
                <p style="text-align: center;">å…¬å¼ï¼šå‰ä¸€å¤© = (ä»Šå¤© + 1) Ã— 2</p>
                <button id="btn-reverse" style="padding:10px 30px; background:#9C27B0; color:#fff; border:none; border-radius:5px; cursor:pointer; font-size:1.2em; display:block; margin: 0 auto;">â—€ å€’æ¨ä¸€å¤©</button>
                
                <div class="peach-tree">
                    <div class="day-box" id="day1" style="opacity: 0.3;">
                        <div class="day-label">Day 1</div>
                        <div class="peach">ğŸ‘</div>
                        <div class="peach-count">?</div>
                    </div>
                    <div class="arrow-left">â†</div>
                    <div class="day-box" id="day2" style="opacity: 0.3;">
                        <div class="day-label">Day 2</div>
                        <div class="peach">ğŸ‘</div>
                        <div class="peach-count">?</div>
                    </div>
                    <div class="arrow-left">â†</div>
                    <div class="day-box" id="day3" style="opacity: 0.3;">
                        <div class="day-label">Day 3</div>
                        <div class="peach">ğŸ‘</div>
                        <div class="peach-count">?</div>
                    </div>
                    <div class="arrow-left">â†</div>
                    <div class="day-box" id="day4">
                        <div class="day-label">Day 4</div>
                        <div class="peach">ğŸ‘</div>
                        <div class="peach-count">1</div>
                    </div>
                </div>
                <div id="reverse-log" style="text-align: center; margin-top: 20px; font-weight: bold; color: #9C27B0;">å½“å‰ï¼šç¬¬ 4 å¤©ï¼Œå‰© 1 ä¸ª</div>
            </div>
        </section>

        <!-- Slide 5: è´¡çŒ®æ³• - æ¥æ°´é—®é¢˜ -->
        <section class="slide" id="slide-5">
            <div class="slide-header">
                <h2><span style="font-size: 1.5em; vertical-align: middle;">ğŸ’§</span> ç»å…¸æ¡ˆä¾‹ï¼šæ¥æ°´é—®é¢˜</h2>
            </div>
            <div class="slide-content">
                <p><strong>é¢˜ç›®ï¼š</strong> <i>N</i> ä¸ªäººæ’é˜Ÿæ¥æ°´ï¼Œç¬¬ <i>i</i> ä¸ªäººæ¥æ°´éœ€è¦ <i>T<sub>i</sub></i> æ—¶é—´ã€‚æ±‚æ‰€æœ‰äººçš„æ€»ç­‰å¾…æ—¶é—´ã€‚</p>
                <p><strong>ä¼ ç»Ÿåšæ³•ï¼š</strong> ç®—å‡ºæ¯ä¸ªäººçš„ç­‰å¾…æ—¶é—´ï¼Œç„¶åæ±‚å’Œã€‚</p>
                <p><strong>è´¡çŒ®æ³•è§†è§’ï¼š</strong></p>
                <ul>
                    <li>ç¬¬ 1 ä¸ªäººæ¥æ°´æ—¶ï¼Œåé¢ <i>N</i>-1 ä¸ªäººéƒ½åœ¨ç­‰ä»–ã€‚</li>
                    <li>æ‰€ä»¥ï¼Œç¬¬ 1 ä¸ªäººçš„æ—¶é—´ <i>T</i><sub>1</sub> è¢«è®¡ç®—äº† (<i>N</i>-1) æ¬¡ï¼</li>
                    <li><strong>è´¡çŒ®å…¬å¼ï¼š</strong> <i>T<sub>i</sub></i> Ã— (åé¢çš„äººæ•°)</li>
                </ul>
            </div>
        </section>

        <!-- Slide 6: äº’åŠ¨ï¼šè´¡çŒ®å¯è§†åŒ– -->
        <section class="slide" id="slide-6">
            <div class="slide-header">
                <h2><span style="font-size: 1.5em; vertical-align: middle;">ğŸ“Š</span> äº’åŠ¨ï¼šè°çš„è´¡çŒ®å¤§ï¼Ÿ</h2>
            </div>
            <div class="slide-content">
                <p>ç‚¹å‡»æ¯ä¸ªäººï¼ŒæŸ¥çœ‹ä»–çš„æ—¶é—´â€œè´¡çŒ®â€ç»™äº†å¤šå°‘äººã€‚</p>
                <div class="queue-line">
                    <div class="person" id="p1" onclick="showContribution(1, 3)">
                        <div class="contribution-text" id="ct1">Ã—3</div>
                        <div class="time-val">5s</div>
                        <div class="wait-bar" id="wb1"></div>
                    </div>
                    <div class="person" id="p2" onclick="showContribution(2, 2)">
                        <div class="contribution-text" id="ct2">Ã—2</div>
                        <div class="time-val">2s</div>
                        <div class="wait-bar" id="wb2"></div>
                    </div>
                    <div class="person" id="p3" onclick="showContribution(3, 1)">
                        <div class="contribution-text" id="ct3">Ã—1</div>
                        <div class="time-val">8s</div>
                        <div class="wait-bar" id="wb3"></div>
                    </div>
                    <div class="person" id="p4" onclick="showContribution(4, 0)">
                        <div class="contribution-text" id="ct4">Ã—0</div>
                        <div class="time-val">3s</div>
                        <div class="wait-bar" id="wb4"></div>
                    </div>
                </div>
                <div id="contrib-log" style="margin-top: 20px; font-size: 0.9em; color: #666;">
                    æ€»ç­‰å¾…æ—¶é—´ = 5Ã—3 + 2Ã—2 + 8Ã—1 + 3Ã—0 = 27
                </div>
                <div class="conclusion" style="margin-top: 20px;">
                    <strong>è´ªå¿ƒç­–ç•¥ï¼š</strong> ä¸ºäº†è®©æ€»å’Œæœ€å°ï¼Œåº”è¯¥è®©è€—æ—¶çŸ­çš„äººæ’å‰é¢ï¼ˆå› ä¸ºä»–çš„æ—¶é—´ä¼šè¢«ä¹˜ä¸Šè¾ƒå¤§çš„ç³»æ•°ï¼‰ã€‚
                </div>
            </div>
        </section>

        <!-- Slide 7: æ€»ç»“ -->
        <section class="slide" id="slide-7">
            <div class="slide-header">
                <h2><span style="font-size: 1.5em; vertical-align: middle;">âœ…</span> æœ¬ç« å°ç»“</h2>
            </div>
            <div class="slide-content">
                <div class="container">
                    <div class="col" style="background:#f3e5f5; padding:20px; border-radius:10px;">
                        <h3>é€†å‘æ€ç»´</h3>
                        <p>é‡åˆ°â€œæœ€åå‰©...â€çš„é—®é¢˜ï¼Œå°è¯•å€’ç€æ¨ã€‚</p>
                        <p>ä»£ç å®ç°é€šå¸¸å¾ˆç®€å•ã€‚</p>
                    </div>
                    <div class="col" style="background:#e3f2fd; padding:20px; border-radius:10px;">
                        <h3>è´¡çŒ®æ³•</h3>
                        <p>ä¸è¦ç›¯ç€â€œæ€»å’Œâ€ï¼Œè¦ç›¯ç€â€œä¸ªä½“â€ã€‚</p>
                        <p>çœ‹æ¯ä¸ªå…ƒç´ è¢«ä½¿ç”¨äº†å¤šå°‘æ¬¡ã€‚</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- å¯¼èˆª -->
        <button id="prevBtn" class="nav-button">â€¹</button>
        <button id="nextBtn" class="nav-button">â€º</button>
        <div id="slideCounter">1 / 7</div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // --- PPTç¿»é¡µé€»è¾‘ ---
            const slides = document.querySelectorAll('.slide');
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            const slideCounter = document.getElementById('slideCounter');
            let currentSlide = 0;
            const totalSlides = slides.length;

            function showSlide(index) {
                slides.forEach((slide, i) => {
                    slide.classList.toggle('active', i === index);
                });
                currentSlide = index;
                updateNav();
            }

            function updateNav() {
                prevBtn.disabled = currentSlide === 0;
                nextBtn.disabled = currentSlide === totalSlides - 1;
                slideCounter.textContent = `${currentSlide + 1} / ${totalSlides}`;
            }

            prevBtn.addEventListener('click', () => { if (currentSlide > 0) showSlide(currentSlide - 1); });
            nextBtn.addEventListener('click', () => { if (currentSlide < totalSlides - 1) showSlide(currentSlide + 1); });
            
            document.addEventListener('keydown', (e) => {
                if (e.key === 'ArrowLeft') prevBtn.click();
                else if (e.key === 'ArrowRight') nextBtn.click();
            });

            showSlide(0);

            // --- çŒ´å­åƒæ¡ƒé€»è¾‘ ---
            const btnReverse = document.getElementById('btn-reverse');
            const reverseLog = document.getElementById('reverse-log');
            let currentDay = 4;
            let peachCount = 1;

            btnReverse.addEventListener('click', function() {
                if (currentDay <= 1) {
                    // Reset
                    currentDay = 4;
                    peachCount = 1;
                    for(let i=1; i<=3; i++) {
                        document.getElementById('day'+i).style.opacity = '0.3';
                        document.getElementById('day'+i).querySelector('.peach-count').innerText = '?';
                    }
                    reverseLog.innerText = "é‡ç½®... å†è¯•ä¸€æ¬¡";
                    btnReverse.innerText = "â—€ å€’æ¨ä¸€å¤©";
                    return;
                }

                // è®¡ç®—å‰ä¸€å¤©
                let prevDay = currentDay - 1;
                let prevCount = (peachCount + 1) * 2;
                
                // Update UI
                const dayBox = document.getElementById('day' + prevDay);
                dayBox.style.opacity = '1';
                dayBox.querySelector('.peach-count').innerText = prevCount;
                
                reverseLog.innerText = `ç¬¬ ${prevDay} å¤© = ( ${peachCount} + 1 ) Ã— 2 = ${prevCount}`;
                
                currentDay--;
                peachCount = prevCount;

                if (currentDay === 1) {
                    btnReverse.innerText = "â†º é‡ç½®";
                    reverseLog.innerHTML += " <br><span style='color:#9C27B0'>ç­”æ¡ˆï¼š22 ä¸ª</span>";
                }
            });

            // --- æ¥æ°´è´¡çŒ®é€»è¾‘ ---
            window.showContribution = function(id, count) {
                // Reset others
                for(let i=1; i<=4; i++) {
                    document.getElementById('p'+i).classList.remove('active');
                    document.getElementById('ct'+i).classList.remove('show');
                    document.getElementById('wb'+i).style.width = '0';
                }

                // Activate current
                const p = document.getElementById('p'+id);
                const ct = document.getElementById('ct'+id);
                const wb = document.getElementById('wb'+id);
                
                p.classList.add('active');
                ct.classList.add('show');
                
                // Show impact bar (width based on count)
                // ç®€å•æ¨¡æ‹Ÿï¼šcountè¶Šå¤§ï¼Œbarè¶Šé•¿
                if (count > 0) {
                    wb.style.width = (count * 60) + 'px'; // å»¶ä¼¸åˆ°åé¢çš„äºº
                }
            }
        });
    </script>

</body>
</html>
