<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¨¡æ‹Ÿç®—æ³• - Chapter 4: åœºæ™¯ç±»æ¨¡æ‹Ÿ</title>
    <style>
        /* --- åŸºç¡€å’Œå¸ƒå±€ (ä¿æŒä¸€è‡´) --- */
        html, body {
            height: 100%;
            margin: 0;
            overflow: hidden;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: #000;
        }

        .ppt-container {
            width: 100%;
            height: 100%;
            position: relative;
        }

        .slide {
            position: absolute;
            width: 100%;
            height: 100%;
            background-color: #ffffff;
            padding: 4vh 6vw;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.6s ease-in-out;
            overflow-y: auto;
        }

        .slide.active {
            opacity: 1;
            visibility: visible;
            z-index: 1;
        }

        /* --- å¯¼èˆªæŒ‰é’® --- */
        .nav-button {
            position: absolute;
            bottom: 30px;
            z-index: 10;
            background-color: rgba(33, 150, 243, 0.7);
            color: white;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            transition: background-color 0.3s, transform 0.3s;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .nav-button:hover {
            background-color: #2196F3;
            transform: scale(1.1);
        }
        #prevBtn { left: 30px; }
        #nextBtn { right: 30px; }
        #prevBtn:disabled, #nextBtn:disabled {
            background-color: #ccc;
            cursor: not-allowed;
            transform: scale(1);
        }

        /* --- é¡µé¢è®¡æ•°å™¨ --- */
        #slideCounter {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 5;
            background-color: rgba(0,0,0,0.4);
            color: white;
            padding: 5px 15px;
            border-radius: 15px;
            font-size: 14px;
        }

        /* --- å¹»ç¯ç‰‡å†…å®¹æ ·å¼ --- */
        .slide-header { flex-shrink: 0; }
        .slide-content {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        h1 { font-size: clamp(2.5em, 5vw, 4em); color: #333; margin: 0; text-align: center; }
        h2 { font-size: clamp(2em, 4vw, 2.8em); color: #2196F3; border-bottom: 3px solid #f0f2f5; padding-bottom: 15px; margin-top: 0; margin-bottom: 2vh; }
        h3 { font-size: clamp(1.2em, 2.5vw, 1.8em); color: #555; text-align: center; margin-top: 20px; }
        p, li { font-size: clamp(1em, 2vw, 1.2em); line-height: 1.6; color: #444; }
        ul { padding-left: 25px; }
        .center-content { display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; height: 100%; }
        .icon { font-size: clamp(3em, 6vw, 4.5em); margin-bottom: 20px; }
        .highlight { color: #2196F3; font-weight: bold; }
        .conclusion { margin-top: 3vh; padding: 15px; background-color: #e3f2fd; border-left: 5px solid #2196F3; border-radius: 4px; font-style: italic; }
        
        /* æœ¬ç« ç‰¹å®šæ ·å¼ */
        .container { display: flex; width: 100%; gap: 30px; align-items: flex-start; }
        .col { flex: 1; text-align: left; }

        /* æœºå™¨äººåœ°å›¾ */
        .grid-map {
            display: grid; grid-template-columns: repeat(5, 50px); gap: 2px; margin: 20px auto;
            background: #ccc; border: 2px solid #999; width: fit-content; padding: 5px;
        }
        .cell {
            width: 50px; height: 50px; background: #fff; display: flex; align-items: center; justify-content: center;
            font-size: 12px; color: #ccc;
        }
        .robot {
            font-size: 30px; transition: all 0.3s ease-in-out;
        }
        
        /* é˜Ÿåˆ—åŠ¨ç”» */
        .queue-container {
            display: flex; align-items: flex-end; gap: 10px; height: 100px; border-bottom: 4px solid #333;
            margin-top: 30px; padding-bottom: 5px; overflow: hidden;
        }
        .person {
            width: 40px; height: 60px; background: #FF9800; border-radius: 5px 5px 0 0;
            display: flex; align-items: center; justify-content: center; color: #fff; font-weight: bold;
            transition: transform 0.5s;
        }
        .person.processing { background: #2196F3; height: 70px; } /* æ­£åœ¨åŠç†å˜é«˜å˜è“ */
        .person.done { opacity: 0; transform: translateY(-20px); }
        
        .window {
            width: 60px; height: 80px; border: 3px solid #333; border-bottom: none;
            display: flex; align-items: center; justify-content: center; font-weight: bold;
            background: #eee; margin-right: 20px;
        }

        /* çŠ¶æ€é¢æ¿ */
        .status-box {
            background: #333; color: #fff; padding: 10px; border-radius: 5px; font-family: monospace;
            margin-top: 15px; min-height: 30px;
        }

        /* ä»£ç å—æ ·å¼ */
        .code-block {
            background-color: #ffffff;
            color: #333333;
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #ddd;
            font-family: "Courier New", Courier, monospace;
            white-space: pre-wrap;
            margin-top: 2vh;
            font-size: clamp(0.8em, 1.6vw, 1em);
            line-height: 1.5;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        .code-comment { color: #008000; font-style: italic; }
        .code-keyword { color: #0000ff; font-weight: bold; }
        .code-func { color: #795e26; }
        .code-num { color: #a31515; }
        .code-str { color: #a31515; }
    </style>
</head>
<body>

    <div class="ppt-container">
        <!-- Slide 1: å°é¢ -->
        <section class="slide active" id="slide-1">
            <div class="center-content">
                <div class="icon">ğŸ—ºï¸</div>
                <h1>Chapter 4: åœºæ™¯ç±»æ¨¡æ‹Ÿ</h1>
                <h3>â€”â€” è¿‡ç¨‹ä¸çŠ¶æ€</h3>
            </div>
        </section>

        <!-- Slide 2: æœ¬ç« ç‰ˆå›¾ -->
        <section class="slide" id="slide-2">
            <div class="slide-header">
                <h2><span style="font-size: 1.5em; vertical-align: middle;">ğŸ“</span> æœ¬ç« ç‰ˆå›¾</h2>
            </div>
            <div class="slide-content">
                <div class="container" style="margin-top: 40px;">
                    <div class="col" style="background:#fff; border:1px solid #ddd; padding:20px; border-radius:8px;">
                        <h3>ğŸ¤– è¿‡ç¨‹æ¨¡æ‹Ÿ</h3>
                        <p><strong>æ ¸å¿ƒï¼š</strong> åæ ‡å˜åŒ–</p>
                        <p>ä¾‹ï¼šæœºå™¨äººã€è´ªåƒè›‡</p>
                        <p style="color:#2196F3;">å…³é”®ï¼šæ–¹å‘æ•°ç»„ (dx, dy)</p>
                    </div>
                    <div class="col" style="background:#fff; border:1px solid #ddd; padding:20px; border-radius:8px;">
                        <h3>â³ çŠ¶æ€æ¨¡æ‹Ÿ</h3>
                        <p><strong>æ ¸å¿ƒï¼š</strong> é˜Ÿåˆ—/æ—¶é—´</p>
                        <p>ä¾‹ï¼šæ’é˜Ÿä¹°ç¥¨ã€çº¢ç»¿ç¯</p>
                        <p style="color:#2196F3;">å…³é”®ï¼šç»´æŠ¤å½“å‰çŠ¶æ€</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Slide 3: è¿‡ç¨‹æ¨¡æ‹Ÿï¼šæœºå™¨äºº -->
        <section class="slide" id="slide-3">
            <div class="slide-header">
                <h2><span style="font-size: 1.5em; vertical-align: middle;">1ï¸âƒ£</span> è¿‡ç¨‹æ¨¡æ‹Ÿï¼šæœºå™¨äºº</h2>
            </div>
            <div class="slide-content">
                <div class="container">
                    <div class="col">
                        <p><strong>ä»»åŠ¡ï¼š</strong> åˆå§‹åœ¨ (0,0)ï¼Œæ ¹æ®æŒ‡ä»¤ç§»åŠ¨ã€‚</p>
                        <ul>
                            <li><code>U</code> (Up): y+1</li>
                            <li><code>D</code> (Down): y-1</li>
                            <li><code>L</code> (Left): x-1</li>
                            <li><code>R</code> (Right): x+1</li>
                        </ul>
                    </div>
                    <div class="col">
                        <div class="code-block"><pre><span class="code-keyword">int</span> x = <span class="code-num">0</span>, y = <span class="code-num">0</span>;
string s = <span class="code-str">"RUR"</span>; <span class="code-comment">// æŒ‡ä»¤</span>

<span class="code-keyword">for</span> (<span class="code-keyword">char</span> c : s) {
    <span class="code-keyword">if</span> (c == <span class="code-str">'U'</span>) y++;
    <span class="code-keyword">else if</span> (c == <span class="code-str">'D'</span>) y--;
    <span class="code-keyword">else if</span> (c == <span class="code-str">'L'</span>) x--;
    <span class="code-keyword">else if</span> (c == <span class="code-str">'R'</span>) x++;
}
<span class="code-comment">// è¿›é˜¶æŠ€å·§ï¼šä½¿ç”¨æ•°ç»„ dx[] dy[]</span></pre></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Slide 4: äº’åŠ¨ï¼šæœºå™¨äººè¡Œèµ° -->
        <section class="slide" id="slide-4">
            <div class="slide-header">
                <h2><span style="font-size: 1.5em; vertical-align: middle;">ğŸ•¹ï¸</span> äº’åŠ¨ï¼šé¥æ§æœºå™¨äºº</h2>
            </div>
            <div class="slide-content">
                <div style="display:flex; gap:40px; align-items:center;">
                    <div>
                        <div class="grid-map" id="map">
                            <!-- JS ç”Ÿæˆ 5x5 ç½‘æ ¼ -->
                        </div>
                        <div class="status-box">Pos: (<span id="pos-x">0</span>, <span id="pos-y">0</span>)</div>
                    </div>
                    
                    <div style="display:flex; flex-direction:column; gap:10px;">
                        <button id="btn-up" style="padding:10px; background:#eee; border:none; cursor:pointer;">â¬†ï¸ Up</button>
                        <div style="display:flex; gap:10px;">
                            <button id="btn-left" style="padding:10px; background:#eee; border:none; cursor:pointer;">â¬…ï¸ Left</button>
                            <button id="btn-right" style="padding:10px; background:#eee; border:none; cursor:pointer;">â¡ï¸ Right</button>
                        </div>
                        <button id="btn-down" style="padding:10px; background:#eee; border:none; cursor:pointer;">â¬‡ï¸ Down</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Slide 5: çŠ¶æ€æ¨¡æ‹Ÿï¼šæ’é˜Ÿä¹°ç¥¨ -->
        <section class="slide" id="slide-5">
            <div class="slide-header">
                <h2><span style="font-size: 1.5em; vertical-align: middle;">2ï¸âƒ£</span> çŠ¶æ€æ¨¡æ‹Ÿï¼šæ’é˜Ÿä¹°ç¥¨</h2>
            </div>
            <div class="slide-content">
                <div class="container">
                    <div class="col">
                        <p><strong>åœºæ™¯ï¼š</strong> 3ä¸ªäººæ’é˜Ÿï¼ŒåŠç†ä¸šåŠ¡åˆ†åˆ«éœ€è¦ 3s, 2s, 4sã€‚</p>
                        <p><strong>æ ¸å¿ƒé€»è¾‘ï¼š</strong></p>
                        <ul>
                            <li><code>now</code>: å½“å‰æ—¶åˆ»</li>
                            <li>æ¯ä¸ªäººåŠå®Œåï¼Œ<code>now</code> å¢åŠ ã€‚</li>
                            <li>ä¸‹ä¸€ä¸ªäººå¿…é¡»ç­‰ä¸Šä¸€ä¸ªäººåŠå®Œã€‚</li>
                        </ul>
                    </div>
                    <div class="col">
                        <div class="code-block"><pre><span class="code-keyword">int</span> times[] = {<span class="code-num">3</span>, <span class="code-num">2</span>, <span class="code-num">4</span>};
<span class="code-keyword">int</span> now = <span class="code-num">0</span>; <span class="code-comment">// å½“å‰æ—¶åˆ»</span>

<span class="code-keyword">for</span> (<span class="code-keyword">int</span> t : times) {
    <span class="code-comment">// æ¨¡æ‹ŸåŠç†è¿‡ç¨‹</span>
    now += t; 
    cout << <span class="code-str">"Finish at: "</span> << now << endl;
}</pre></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Slide 6: äº’åŠ¨ï¼šæ’é˜Ÿæ¼”ç¤º -->
        <section class="slide" id="slide-6">
            <div class="slide-header">
                <h2><span style="font-size: 1.5em; vertical-align: middle;">â³</span> äº’åŠ¨ï¼šæ’é˜Ÿæ¨¡æ‹Ÿå™¨</h2>
            </div>
            <div class="slide-content">
                <button id="btn-queue" style="padding:10px 30px; background:#2196F3; color:#fff; border:none; border-radius:5px; cursor:pointer; font-size:1.2em;">â–¶ å¼€å§‹åŠç†</button>
                
                <div class="queue-container" id="queue-box">
                    <div class="window">çª—å£</div>
                    <!-- JS ç”Ÿæˆäºº -->
                </div>

                <div class="status-box">å½“å‰æ—¶åˆ» (Time): <span id="time-val">0</span>s</div>
            </div>
        </section>

        <!-- Slide 7: æ€»ç»“ -->
        <section class="slide" id="slide-7">
            <div class="slide-header">
                <h2><span style="font-size: 1.5em; vertical-align: middle;">âœ…</span> æœ¬ç« å°ç»“</h2>
            </div>
            <div class="slide-content">
                <div class="container">
                    <div class="col">
                        <div style="background:#e3f2fd; padding:15px; border-radius:8px;">
                            <h3>åæ ‡æ¨¡æ‹Ÿ</h3>
                            <p><code>x, y</code> è®°å½•ä½ç½®</p>
                            <p><code>if/else</code> å¤„ç†æ–¹å‘</p>
                        </div>
                    </div>
                    <div class="col">
                        <div style="background:#fff3e0; padding:15px; border-radius:8px;">
                            <h3>çŠ¶æ€æ¨¡æ‹Ÿ</h3>
                            <p><code>now</code> è®°å½•æ—¶é—´</p>
                            <p>æŒ‰é¡ºåºç´¯åŠ </p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- å¯¼èˆª -->
        <button id="prevBtn" class="nav-button">â€¹</button>
        <button id="nextBtn" class="nav-button">â€º</button>
        <div id="slideCounter">1 / 7</div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const slides = document.querySelectorAll('.slide');
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            const slideCounter = document.getElementById('slideCounter');
            let currentSlide = 0;
            const totalSlides = slides.length;

            function showSlide(index) {
                slides.forEach((slide, i) => {
                    slide.classList.toggle('active', i === index);
                });
                currentSlide = index;
                updateNav();
            }

            function updateNav() {
                prevBtn.disabled = currentSlide === 0;
                nextBtn.disabled = currentSlide === totalSlides - 1;
                slideCounter.textContent = `${currentSlide + 1} / ${totalSlides}`;
            }

            prevBtn.addEventListener('click', () => {
                if (currentSlide > 0) {
                    showSlide(currentSlide - 1);
                }
            });

            nextBtn.addEventListener('click', () => {
                if (currentSlide < totalSlides - 1) {
                    showSlide(currentSlide + 1);
                }
            });

            document.addEventListener('keydown', (e) => {
                if (e.key === 'ArrowLeft') {
                    prevBtn.click();
                } else if (e.key === 'ArrowRight') {
                    nextBtn.click();
                }
            });

            showSlide(0);

            // --- æœºå™¨äººè¡Œèµ°é€»è¾‘ ---
            let rx = 0, ry = 0; // é€»è¾‘åæ ‡
            const map = document.getElementById('map');
            const posX = document.getElementById('pos-x');
            const posY = document.getElementById('pos-y');

            // åˆå§‹åŒ–åœ°å›¾ (5x5)
            for(let r=0; r<5; r++) {
                for(let c=0; c<5; c++) {
                    let cell = document.createElement('div');
                    cell.className = 'cell';
                    cell.id = `cell-${c}-${4-r}`; // x, y
                    map.appendChild(cell);
                }
            }

            function updateRobot() {
                document.querySelectorAll('.cell').forEach(c => c.innerHTML = '');
                let cell = document.getElementById(`cell-${rx}-${ry}`);
                if (cell) {
                    cell.innerHTML = '<div class="robot">ğŸ¤–</div>';
                }
                posX.innerText = rx;
                posY.innerText = ry;
            }
            updateRobot();

            function moveRobot(dx, dy) {
                let nx = rx + dx;
                let ny = ry + dy;
                // è¾¹ç•Œæ£€æŸ¥ (0-4)
                if(nx >= 0 && nx <= 4 && ny >= 0 && ny <= 4) {
                    rx = nx; ry = ny;
                    updateRobot();
                }
            }

            document.getElementById('btn-up').addEventListener('click', () => moveRobot(0, 1));
            document.getElementById('btn-down').addEventListener('click', () => moveRobot(0, -1));
            document.getElementById('btn-left').addEventListener('click', () => moveRobot(-1, 0));
            document.getElementById('btn-right').addEventListener('click', () => moveRobot(1, 0));


            // --- æ’é˜Ÿæ¨¡æ‹Ÿé€»è¾‘ ---
            const btnQueue = document.getElementById('btn-queue');
            const queueBox = document.getElementById('queue-box');
            const timeVal = document.getElementById('time-val');

            btnQueue.addEventListener('click', function() {
                // ä¿ç•™çª—å£ï¼Œæ¸…é™¤äºº
                while(queueBox.children.length > 1) queueBox.removeChild(queueBox.lastChild);
                timeVal.innerText = '0';

                const people = [3, 2, 4]; // è€—æ—¶
                let currentTime = 0;

                // ç”Ÿæˆäºº
                people.forEach((t, i) => {
                    let p = document.createElement('div');
                    p.className = 'person';
                    p.innerText = t + 's';
                    p.id = 'p-' + i;
                    queueBox.appendChild(p);
                });

                // æ¨¡æ‹Ÿè¿‡ç¨‹
                let delay = 500;
                people.forEach((t, i) => {
                    setTimeout(() => {
                        let p = document.getElementById('p-' + i);
                        if (p) p.classList.add('processing'); // å˜è“ï¼Œå˜é«˜
                        
                        // åŠç†ä¸­åŠ¨ç”» (æ¨¡æ‹Ÿè€—æ—¶)
                        let processTime = 1000; 
                        
                        setTimeout(() => {
                            currentTime += t;
                            timeVal.innerText = currentTime;
                            if (p) {
                                p.classList.remove('processing');
                                p.classList.add('done'); // æ¶ˆå¤±
                            }
                        }, processTime);

                    }, delay);
                    
                    delay += 1500; // ä¸‹ä¸€ä¸ªäººç­‰å¾…
                });
            });
        });
    </script>

</body>
</html>
