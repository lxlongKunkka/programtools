<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¨¡æ‹Ÿç®—æ³• - Chapter 3: åŸºç¡€æ¨¡æ‹Ÿé¢˜</title>
    <style>
        /* --- åŸºç¡€å’Œå¸ƒå±€ (ä¿æŒä¸€è‡´) --- */
        html, body {
            height: 100%;
            margin: 0;
            overflow: hidden;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: #000;
        }

        .ppt-container {
            width: 100%;
            height: 100%;
            position: relative;
        }

        .slide {
            position: absolute;
            width: 100%;
            height: 100%;
            background-color: #ffffff;
            padding: 4vh 6vw;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.6s ease-in-out;
            overflow-y: auto;
        }

        .slide.active {
            opacity: 1;
            visibility: visible;
            z-index: 1;
        }

        /* --- å¯¼èˆªæŒ‰é’® --- */
        .nav-button {
            position: absolute;
            bottom: 30px;
            z-index: 10;
            background-color: rgba(33, 150, 243, 0.7);
            color: white;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            transition: background-color 0.3s, transform 0.3s;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .nav-button:hover {
            background-color: #2196F3;
            transform: scale(1.1);
        }
        #prevBtn { left: 30px; }
        #nextBtn { right: 30px; }
        #prevBtn:disabled, #nextBtn:disabled {
            background-color: #ccc;
            cursor: not-allowed;
            transform: scale(1);
        }

        /* --- é¡µé¢è®¡æ•°å™¨ --- */
        #slideCounter {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 5;
            background-color: rgba(0,0,0,0.4);
            color: white;
            padding: 5px 15px;
            border-radius: 15px;
            font-size: 14px;
        }

        /* --- å¹»ç¯ç‰‡å†…å®¹æ ·å¼ --- */
        .slide-header { flex-shrink: 0; }
        .slide-content {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        h1 { font-size: clamp(2.5em, 5vw, 4em); color: #333; margin: 0; text-align: center; }
        h2 { font-size: clamp(2em, 4vw, 2.8em); color: #2196F3; border-bottom: 3px solid #f0f2f5; padding-bottom: 15px; margin-top: 0; margin-bottom: 2vh; }
        h3 { font-size: clamp(1.2em, 2.5vw, 1.8em); color: #555; text-align: center; margin-top: 20px; }
        p, li { font-size: clamp(1em, 2vw, 1.2em); line-height: 1.6; color: #444; }
        ul { padding-left: 25px; }
        .center-content { display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; height: 100%; }
        .icon { font-size: clamp(3em, 6vw, 4.5em); margin-bottom: 20px; }
        .highlight { color: #2196F3; font-weight: bold; }
        .conclusion { margin-top: 3vh; padding: 15px; background-color: #e3f2fd; border-left: 5px solid #2196F3; border-radius: 4px; font-style: italic; }
        
        /* æœ¬ç« ç‰¹å®šæ ·å¼ */
        .container { display: flex; width: 100%; gap: 30px; align-items: flex-start; }
        .col { flex: 1; text-align: left; }

        /* æ¨¡å—å¡ç‰‡ */
        .module-card {
            background: #fff; border: 2px solid #ddd; border-radius: 8px; padding: 20px;
            text-align: center; transition: 0.3s;
        }
        .module-card:hover { border-color: #2196F3; transform: translateY(-5px); }
        .module-icon { font-size: 3em; display: block; margin-bottom: 10px; }

        /* è§’è°·çŒœæƒ³æ¼”ç¤º */
        .collatz-box {
            display: flex; align-items: center; justify-content: center; gap: 20px; margin-top: 30px;
            font-family: monospace; font-size: 2em; font-weight: bold;
        }
        .num-circle {
            width: 100px; height: 100px; border-radius: 50%; background: #333; color: #fff;
            display: flex; align-items: center; justify-content: center; transition: 0.3s;
        }
        .num-circle.odd { background: #FF9800; } 
        .num-circle.even { background: #2196F3; } 
        .arrow { font-size: 1.5em; color: #999; }

        /* å‡¯æ’’å¯†ç æ¼”ç¤º */
        .cipher-container {
            display: flex; flex-direction: column; align-items: center; gap: 20px; margin-top: 20px;
        }
        .char-row { display: flex; gap: 10px; }
        .cipher-box {
            width: 60px; height: 60px; border: 2px solid #ccc; border-radius: 8px;
            display: flex; align-items: center; justify-content: center;
            font-size: 1.8em; font-family: monospace; background: #fff; transition: 0.3s;
        }
        .cipher-box.active { border-color: #2196F3; background: #e3f2fd; transform: scale(1.1); }
        .cipher-box.changed { background: #333; color: #fff; border-color: #333; }
        
        .arrow-down { font-size: 2em; color: #2196F3; margin: 5px 0; }

        /* ä»£ç å—æ ·å¼ */
        .code-block {
            background-color: #ffffff;
            color: #333333;
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #ddd;
            font-family: "Courier New", Courier, monospace;
            white-space: pre-wrap;
            margin-top: 2vh;
            font-size: clamp(0.8em, 1.6vw, 1em);
            line-height: 1.5;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        .code-comment { color: #008000; font-style: italic; }
        .code-keyword { color: #0000ff; font-weight: bold; }
        .code-func { color: #795e26; }
        .code-num { color: #a31515; }
        .code-str { color: #a31515; }
    </style>
</head>
<body>

    <div class="ppt-container">
        <!-- Slide 1: å°é¢ -->
        <section class="slide active" id="slide-1">
            <div class="center-content">
                <div class="icon">ğŸ§®</div>
                <h1>Chapter 3: åŸºç¡€æ¨¡æ‹Ÿé¢˜</h1>
                <h3>â€”â€” æ•°å€¼è®¡ç®— + å­—ç¬¦å¤„ç†</h3>
            </div>
        </section>

        <!-- Slide 2: æœ¬ç« ç‰ˆå›¾ -->
        <section class="slide" id="slide-2">
            <div class="slide-header">
                <h2><span style="font-size: 1.5em; vertical-align: middle;">ğŸ—ºï¸</span> æœ¬ç« ç‰ˆå›¾</h2>
            </div>
            <div class="slide-content">
                <div class="container">
                    <div class="col module-card">
                        <span class="module-icon">ğŸ§®</span>
                        <h3>æ•°å€¼æ¨¡æ‹Ÿ</h3>
                        <p>æŒ‰å…¬å¼é‡å¤è®¡ç®—</p>
                        <p style="font-size:0.8em; color:#666;">ä¾‹ï¼šè§’è°·çŒœæƒ³ (3n+1)</p>
                    </div>
                    <div class="col module-card">
                        <span class="module-icon">ğŸ”</span>
                        <h3>å­—ç¬¦æ¨¡æ‹Ÿ</h3>
                        <p>æŒ‰è§„åˆ™å˜æ¢å­—ç¬¦</p>
                        <p style="font-size:0.8em; color:#666;">ä¾‹ï¼šå‡¯æ’’å¯†ç  (åŠ å¯†)</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Slide 3: æ•°å€¼æ¨¡æ‹Ÿï¼šè§’è°·çŒœæƒ³ -->
        <section class="slide" id="slide-3">
            <div class="slide-header">
                <h2><span style="font-size: 1.5em; vertical-align: middle;">1ï¸âƒ£</span> æ•°å€¼æ¨¡æ‹Ÿï¼šè§’è°·çŒœæƒ³</h2>
            </div>
            <div class="slide-content">
                <div class="container">
                    <div class="col">
                        <p><strong>è§„åˆ™ï¼š</strong></p>
                        <ul>
                            <li><span style="color:#FF9800; font-weight:bold;">å¥‡æ•°</span>ï¼šä¹˜ 3 åŠ  1</li>
                            <li><span style="color:#2196F3; font-weight:bold;">å¶æ•°</span>ï¼šé™¤ä»¥ 2</li>
                            <li>é‡å¤ç›´åˆ°å˜æˆ 1ã€‚</li>
                        </ul>
                    </div>
                    <div class="col">
                        <div class="code-block"><pre><span class="code-keyword">while</span> (n != <span class="code-num">1</span>) {
    <span class="code-keyword">if</span> (n % <span class="code-num">2</span> == <span class="code-num">1</span>) {
        n = n * <span class="code-num">3</span> + <span class="code-num">1</span>;
    } <span class="code-keyword">else</span> {
        n = n / <span class="code-num">2</span>;
    }
    cout << n << <span class="code-str">" "</span>;
}</pre></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Slide 4: äº’åŠ¨ï¼šè§’è°·çŒœæƒ³æ¼”ç¤º -->
        <section class="slide" id="slide-4">
            <div class="slide-header">
                <h2><span style="font-size: 1.5em; vertical-align: middle;">ğŸ²</span> äº’åŠ¨ï¼šæ¼”ç¤º n=5</h2>
            </div>
            <div class="slide-content">
                <button id="btn-collatz" style="padding:10px 30px; background:#2196F3; color:#fff; border:none; border-radius:5px; cursor:pointer; font-size:1.2em;">â–¶ ä¸‹ä¸€æ­¥</button>

                <div class="collatz-box">
                    <div class="num-circle odd" id="collatz-num">5</div>
                    <div class="arrow">&rarr;</div>
                    <div id="collatz-op" style="font-size:0.8em; color:#666;">ç­‰å¾…å¼€å§‹...</div>
                </div>

                <div id="history-log" style="margin-top:30px; font-family:monospace; color:#666; font-size:0.8em;">
                    å†å²è·¯å¾„: 5
                </div>
            </div>
        </section>

        <!-- Slide 5: å­—ç¬¦æ¨¡æ‹Ÿï¼šå‡¯æ’’å¯†ç  -->
        <section class="slide" id="slide-5">
            <div class="slide-header">
                <h2><span style="font-size: 1.5em; vertical-align: middle;">2ï¸âƒ£</span> å­—ç¬¦æ¨¡æ‹Ÿï¼šå‡¯æ’’å¯†ç </h2>
            </div>
            <div class="slide-content">
                <div class="container">
                    <div class="col">
                        <p><strong>ä»»åŠ¡ï¼š</strong> å°†æ¯ä¸ªå­—æ¯å‘åç§» 1 ä½ã€‚</p>
                        <p><code>'a'</code> &rarr; <code>'b'</code>, <code>'b'</code> &rarr; <code>'c'</code></p>
                        <div style="background:#ffebee; padding:10px; border-radius:5px; border-left:4px solid #d32f2f; margin-top:10px;">
                            <strong>âš ï¸ è¾¹ç•Œé™·é˜±ï¼š</strong><br>
                            <code>'z'</code> åé¢æ˜¯è°ï¼Ÿ<br>
                            ä¸èƒ½æ˜¯ <code>'{'</code>ï¼Œå¿…é¡»å›åˆ° <code>'a'</code>ã€‚
                        </div>
                    </div>
                    <div class="col">
                        <div class="code-block"><pre>string s = <span class="code-str">"zebra"</span>; <span class="code-comment">// æ–‘é©¬</span>
<span class="code-keyword">for</span> (<span class="code-keyword">int</span> i = <span class="code-num">0</span>; i < s.size(); i++) {
    <span class="code-comment">// ç‰¹åˆ¤è¾¹ç•Œ</span>
    <span class="code-keyword">if</span> (s[i] == <span class="code-str">'z'</span>) {
        s[i] = <span class="code-str">'a'</span>;
    } <span class="code-keyword">else</span> {
        s[i] = s[i] + <span class="code-num">1</span>; <span class="code-comment">// å­—ç¬¦+1</span>
    }
}
cout << s; <span class="code-comment">// "afcsb"</span></pre></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Slide 6: äº’åŠ¨ï¼šåŠ å¯†æ¼”ç¤º -->
        <section class="slide" id="slide-6">
            <div class="slide-header">
                <h2><span style="font-size: 1.5em; vertical-align: middle;">ğŸ”</span> äº’åŠ¨ï¼šåŠ å¯† "zebra"</h2>
            </div>
            <div class="slide-content">
                <p style="font-size:0.9em;">è§„åˆ™ï¼šåç§»ä¸€ä½ (z&rarr;a)</p>
                <button id="btn-cipher" style="padding:10px 30px; background:#2196F3; color:#fff; border:none; border-radius:5px; cursor:pointer; font-size:1.2em;">â–¶ å¼€å§‹åŠ å¯†</button>
                
                <div class="cipher-container">
                    <!-- åŸæ–‡ -->
                    <div class="char-row" id="row-src">
                        <!-- JS ç”Ÿæˆ -->
                    </div>
                    
                    <div class="arrow-down">â¬‡</div>
                    
                    <!-- å¯†æ–‡ -->
                    <div class="char-row" id="row-dst">
                        <!-- JS ç”Ÿæˆ -->
                    </div>
                </div>

                <div id="cipher-log" style="height:30px; font-family:monospace; color:#666; margin-top:20px;"></div>
            </div>
        </section>

        <!-- Slide 7: æ€»ç»“ -->
        <section class="slide" id="slide-7">
            <div class="slide-header">
                <h2><span style="font-size: 1.5em; vertical-align: middle;">âœ…</span> æœ¬ç« å°ç»“</h2>
            </div>
            <div class="slide-content">
                <div class="container">
                    <div class="col" style="background:#fff; border:1px solid #ddd; padding:20px; border-radius:8px;">
                        <h3>æ•°å€¼æ¨¡æ‹Ÿ</h3>
                        <p><code>while</code> å¾ªç¯</p>
                        <p>æŒ‰å…¬å¼è¿­ä»£ (å¦‚ 3n+1)</p>
                    </div>
                    <div class="col" style="background:#fff; border:1px solid #ddd; padding:20px; border-radius:8px;">
                        <h3>å­—ç¬¦æ¨¡æ‹Ÿ</h3>
                        <p><code>char + 1</code> è¿ç®—</p>
                        <p><strong>è¾¹ç•Œå¤„ç†</strong> (z&rarr;a)</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- å¯¼èˆª -->
        <button id="prevBtn" class="nav-button">â€¹</button>
        <button id="nextBtn" class="nav-button">â€º</button>
        <div id="slideCounter">1 / 7</div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const slides = document.querySelectorAll('.slide');
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            const slideCounter = document.getElementById('slideCounter');
            let currentSlide = 0;
            const totalSlides = slides.length;

            function showSlide(index) {
                slides.forEach((slide, i) => {
                    slide.classList.toggle('active', i === index);
                });
                currentSlide = index;
                updateNav();
            }

            function updateNav() {
                prevBtn.disabled = currentSlide === 0;
                nextBtn.disabled = currentSlide === totalSlides - 1;
                slideCounter.textContent = `${currentSlide + 1} / ${totalSlides}`;
            }

            prevBtn.addEventListener('click', () => {
                if (currentSlide > 0) {
                    showSlide(currentSlide - 1);
                }
            });

            nextBtn.addEventListener('click', () => {
                if (currentSlide < totalSlides - 1) {
                    showSlide(currentSlide + 1);
                }
            });

            document.addEventListener('keydown', (e) => {
                if (e.key === 'ArrowLeft') {
                    prevBtn.click();
                } else if (e.key === 'ArrowRight') {
                    nextBtn.click();
                }
            });

            showSlide(0);

            // --- è§’è°·çŒœæƒ³é€»è¾‘ ---
            let n = 5;
            const btnCollatz = document.getElementById('btn-collatz');
            const elCollatz = document.getElementById('collatz-num');
            const opCollatz = document.getElementById('collatz-op');
            const logCollatz = document.getElementById('history-log');

            btnCollatz.addEventListener('click', function() {
                if (n === 1) {
                    opCollatz.innerText = "ç»“æŸ (End)";
                    return;
                }

                if (n % 2 === 1) {
                    n = n * 3 + 1;
                    opCollatz.innerText = "å¥‡æ•° Ã—3+1";
                    elCollatz.className = "num-circle even"; 
                } else {
                    n = n / 2;
                    opCollatz.innerText = "å¶æ•° Ã·2";
                    if (n % 2 === 1) elCollatz.className = "num-circle odd";
                    else elCollatz.className = "num-circle even";
                }

                elCollatz.innerText = n;
                logCollatz.innerText += " -> " + n;
            });

            // --- å‡¯æ’’å¯†ç é€»è¾‘ ---
            const word = "zebra";
            const rowSrc = document.getElementById('row-src');
            const rowDst = document.getElementById('row-dst');
            const cLog = document.getElementById('cipher-log');
            const btnCipher = document.getElementById('btn-cipher');

            // Init
            rowSrc.innerHTML = ''; rowDst.innerHTML = '';
            for(let c of word) {
                let b1 = document.createElement('div'); b1.className = 'cipher-box'; b1.innerText = c;
                rowSrc.appendChild(b1);
                
                let b2 = document.createElement('div'); b2.className = 'cipher-box'; b2.innerText = '?'; b2.style.opacity = '0.3';
                rowDst.appendChild(b2);
            }

            btnCipher.addEventListener('click', function() {
                let i = 0;
                btnCipher.disabled = true; // é˜²æ­¢é‡å¤ç‚¹å‡»
                let timer = setInterval(() => {
                    if(i >= word.length) { 
                        clearInterval(timer); 
                        cLog.innerText="åŠ å¯†å®Œæˆï¼"; 
                        btnCipher.disabled = false;
                        return; 
                    }

                    // 1. é€‰ä¸­åŸæ–‡
                    let srcBoxes = rowSrc.children;
                    let dstBoxes = rowDst.children;
                    
                    if(i>0) srcBoxes[i-1].classList.remove('active');
                    srcBoxes[i].classList.add('active');

                    // 2. è®¡ç®—
                    let charCode = word.charCodeAt(i);
                    let newChar = '';
                    
                    if (word[i] === 'z') {
                        newChar = 'a';
                        cLog.innerHTML = `æ£€æµ‹åˆ° 'z' &rarr; å›æ»šåˆ° <span style="color:red; font-weight:bold;">'a'</span>`;
                    } else {
                        newChar = String.fromCharCode(charCode + 1);
                        cLog.innerText = `'${word[i]}' + 1 = '${newChar}'`;
                    }

                    // 3. æ˜¾ç¤ºå¯†æ–‡
                    dstBoxes[i].innerText = newChar;
                    dstBoxes[i].style.opacity = '1';
                    dstBoxes[i].classList.add('changed');

                    i++;
                }, 1000); // 1ç§’ä¸€æ­¥
            });
        });
    </script>

</body>
</html>
