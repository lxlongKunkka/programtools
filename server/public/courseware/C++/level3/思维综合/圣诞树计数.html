<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è§£é¢˜è¯¾ä»¶ï¼šåœ£è¯æ ‘è®¡æ•°</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #f8f9fa;
            padding: 20px;
        }

        .ppt-container {
            max-width: 1200px;
            margin: 0 auto;
            position: relative;
            min-height: 80vh;
        }

        .slide {
            display: none;
            background-color: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            min-height: 80vh;
        }

        .slide.active {
            display: block;
        }

        .slide-header {
            border-bottom: 2px solid #eee;
            padding-bottom: 15px;
            margin-bottom: 25px;
        }

        .slide-content {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: calc(100% - 80px);
        }

        .center-content {
            text-align: center;
            padding: 50px 0;
        }

        .icon {
            font-size: 5em;
            margin-bottom: 30px;
        }

        h1 {
            font-size: 2.5em;
            margin-bottom: 20px;
            color: #333;
        }

        h2 {
            color: #444;
            font-size: 1.8em;
        }

        h3 {
            color: #666;
            font-size: 1.4em;
        }

        h4 {
            color: #555;
            margin-bottom: 15px;
        }

        p {
            margin-bottom: 15px;
            line-height: 1.6;
            color: #333;
            font-size: 1.1em;
        }

        ul {
            margin-left: 30px;
            margin-bottom: 20px;
        }

        li {
            margin-bottom: 10px;
            line-height: 1.6;
        }

        .problem-box {
            background-color: #f0f7ff;
            border-left: 4px solid #3498db;
            padding: 20px;
            border-radius: 0 8px 8px 0;
            width: 100%;
            margin-bottom: 30px;
        }

        .conclusion {
            background-color: #fff8e1;
            border-left: 4px solid #f39c12;
            padding: 20px;
            border-radius: 0 8px 8px 0;
            width: 100%;
            font-size: 1.1em;
        }

        .nav-button {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background-color: #3498db;
            color: white;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            font-size: 1.5em;
            cursor: pointer;
            z-index: 10;
            transition: all 0.3s ease;
        }

        .nav-button:hover {
            background-color: #2980b9;
        }

        #prevBtn {
            left: -25px;
        }

        #nextBtn {
            right: -25px;
        }

        #slideCounter {
            position: absolute;
            bottom: -40px;
            left: 50%;
            transform: translateX(-50%);
            color: #666;
            font-size: 1.1em;
        }

        .code-block {
            background-color: #ffffff;
            color: #333333;
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #ddd;
            font-family: "Courier New", Courier, monospace;
            white-space: pre-wrap;
            margin-top: 2vh;
            font-size: clamp(0.8em, 1.6vw, 1em);
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            width: 100%;
            overflow-x: auto;
        }

        .code-block .comment { color: #008000; font-style: italic; }
        .code-block .keyword { color: #0000ff; font-weight: bold; }
        .code-block .type { color: #2b91af; }
        .code-block .number { color: #a31515; }
        .code-block .string { color: #a31515; }
        .code-block .preprocessor { color: #808080; }

        .animation-area {
            height: 400px;
            position: relative;
            border: 2px dashed #ccc;
            margin-top: 2vh;
            padding: 10px;
            overflow-x: auto;
            width: 100%;
        }

        .tree {
            position: absolute;
            text-align: center;
            transition: all 0.5s ease;
            cursor: pointer;
        }

        .tree.selected {
            transform: scale(1.1);
            filter: drop-shadow(0 0 8px #2ecc71);
        }

        .tree.ignored {
            opacity: 0.3;
            filter: grayscale(100%);
        }

        .tree-label {
            margin-top: 5px;
            font-size: 0.9em;
            font-weight: bold;
        }

        #countDisplay {
            font-size: 1.5em;
            font-weight: bold;
            margin: 20px 0;
            text-align: center;
        }

        button {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            font-size: 1em;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        button:hover {
            background-color: #2980b9;
        }
    </style>
</head>
<body>
    <div class="ppt-container">
        <!-- Slide 1: å°é¢é¡µ -->
        <div class="slide active" id="slide-1">
            <div class="center-content">
                <div class="icon">ğŸ„</div>
                <h1>è§£é¢˜è¯¾ä»¶ï¼šåœ£è¯æ ‘è®¡æ•°</h1>
                <h3>â€”â€” æ ‘å½¢ç»“æ„ä¸æ·±åº¦ä¼˜å…ˆæœç´¢åº”ç”¨</h3>
            </div>
        </div>

        <!-- Slide 2: é¢˜ç›®æè¿° -->
        <div class="slide" id="slide-2">
            <div class="slide-header">
                <h2><span style="font-size: 1.5em; vertical-align: middle;">ğŸ“</span> é¢˜ç›®è§£æ</h2>
            </div>
            <div class="slide-content" style="justify-content: flex-start;">
                <div class="problem-box">
                    <p><strong>é¢˜ç›®æ ¸å¿ƒï¼š</strong></p>
                    <p>ç»™å®šä¸€æ£µåŒ…å« n ä¸ªèŠ‚ç‚¹çš„åœ£è¯æ ‘ï¼ˆæ ‘å½¢ç»“æ„ï¼‰ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰ä¸€ä¸ªé¢œè‰²å€¼ã€‚è¯·è®¡ç®—å‡ºè¿™æ£µæ ‘ä¸Šæœ‰å¤šå°‘ä¸ªä¸åŒçš„å­æ ‘ï¼Œä½¿å¾—å­æ ‘ä¸­æ‰€æœ‰èŠ‚ç‚¹çš„é¢œè‰²éƒ½ç›¸åŒã€‚</p>
                    <p><strong>çº¦æŸæ¡ä»¶ï¼š</strong></p>
                    <ul>
                        <li>å­æ ‘å¿…é¡»æ˜¯è¿é€šçš„ï¼Œä¸”åŒ…å«è‡³å°‘ä¸€ä¸ªèŠ‚ç‚¹ã€‚</li>
                        <li>å•ä¸ªèŠ‚ç‚¹ä¹Ÿè§†ä¸ºä¸€ä¸ªæœ‰æ•ˆçš„å­æ ‘ã€‚</li>
                        <li>ä¸åŒä½ç½®ä½†ç»“æ„å’Œé¢œè‰²åˆ†å¸ƒç›¸åŒçš„å­æ ‘ç®—ä¸åŒçš„å­æ ‘ã€‚</li>
                    </ul>
                </div>
                <div class="conclusion">
                    <strong>ä¸€å¥è¯ç›®æ ‡ï¼š</strong>ç»Ÿè®¡æ ‘ä¸Šæ‰€æœ‰èŠ‚ç‚¹é¢œè‰²ç›¸åŒçš„è¿é€šå­æ ‘æ•°é‡ã€‚
                </div>
            </div>
        </div>

        <!-- Slide 3: æ€è·¯æ¢è®¨ -->
        <div class="slide" id="slide-3">
            <div class="slide-header">
                <h2><span style="font-size: 1.5em; vertical-align: middle;">ğŸ¤”</span> æ€è·¯æ¢è®¨ï¼šå¦‚ä½•è®¡æ•°ï¼Ÿ</h2>
            </div>
            <div class="slide-content" style="justify-content: flex-start;">
                <p>æˆ‘ä»¬å¯ä»¥é‡‡ç”¨ä»¥ä¸‹ç­–ç•¥è§£å†³é—®é¢˜ï¼š</p>
                <ul>
                    <li>
                        <strong>ç­–ç•¥åˆ†æï¼š</strong><br>
                        å¯¹äºæ ‘ä¸Šçš„æ¯ä¸ªèŠ‚ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘ä»¥å®ƒä¸ºæ ¹çš„å­æ ‘ä¸­ï¼Œæœ‰å¤šå°‘ä¸ªç¬¦åˆæ¡ä»¶çš„å­æ ‘ã€‚
                        å½“ä¸€ä¸ªèŠ‚ç‚¹ä¸å…¶æ‰€æœ‰å­èŠ‚ç‚¹é¢œè‰²ç›¸åŒæ—¶ï¼Œå®ƒä»¬å¯ä»¥ç»„æˆæ›´å¤§çš„ç¬¦åˆæ¡ä»¶çš„å­æ ‘ã€‚
                    </li>
                    <li>
                        <strong>æ ¸å¿ƒæ€è·¯ï¼š</strong><br>
                        ä½¿ç”¨æ·±åº¦ä¼˜å…ˆæœç´¢(DFS)éå†æ•´æ£µæ ‘ï¼Œå¯¹æ¯ä¸ªèŠ‚ç‚¹è®¡ç®—ä»¥å®ƒä¸ºæ ¹çš„åŒè‰²å­æ ‘æ•°é‡ã€‚
                        å¦‚æœå½“å‰èŠ‚ç‚¹ä¸å­èŠ‚ç‚¹é¢œè‰²ç›¸åŒï¼Œåˆ™å¯ä»¥åˆå¹¶è®¡ç®—ï¼Œå¦åˆ™å•ç‹¬è®¡ç®—ã€‚
                    </li>
                    <li>
                        <strong>å®ç°æ­¥éª¤ï¼š</strong><br>
                        1. æ„å»ºæ ‘çš„é‚»æ¥è¡¨è¡¨ç¤º<br>
                        2. ä»æ ¹èŠ‚ç‚¹å¼€å§‹è¿›è¡ŒDFSéå†<br>
                        3. å¯¹æ¯ä¸ªèŠ‚ç‚¹ï¼Œç»Ÿè®¡å…¶æ‰€æœ‰åŒè‰²å­èŠ‚ç‚¹çš„æœ‰æ•ˆå­æ ‘æ•°é‡<br>
                        4. ç´¯åŠ æ‰€æœ‰èŠ‚ç‚¹çš„æœ‰æ•ˆå­æ ‘æ•°é‡
                    </li>
                </ul>
            </div>
        </div>

        <!-- Slide 4: åŠ¨ç”»æ¼”ç¤º -->
        <div class="slide" id="slide-4">
            <div class="slide-header">
                <h2><span style="font-size: 1.5em; vertical-align: middle;">ğŸ¬</span> åŠ¨ç”»æ¼”ç¤ºï¼šè®¡æ•°è¿‡ç¨‹</h2>
            </div>
            <div class="slide-content" style="justify-content: flex-start;">
                <p><strong>æ ·ä¾‹æ ‘ç»“æ„ï¼š</strong></p>
                <p>èŠ‚ç‚¹é¢œè‰²ï¼š1(çº¢)ã€2(ç»¿)ã€3(è“)</p>
                <div class="animation-area" id="treeAnimation">
                    <!-- æ ¹èŠ‚ç‚¹ -->
                    <div class="tree" id="node1" style="top: 50px; left: 50%;">
                        <div style="width: 40px; height: 40px; background-color: #e74c3c; border-radius: 50%; margin: 0 auto; display: flex; align-items: center; justify-content: center; color: white;">1</div>
                        <div class="tree-label">èŠ‚ç‚¹1(çº¢)</div>
                    </div>
                    
                    <!-- ç¬¬ä¸€å±‚å­èŠ‚ç‚¹ -->
                    <div class="tree" id="node2" style="top: 150px; left: 30%;">
                        <div style="width: 40px; height: 40px; background-color: #e74c3c; border-radius: 50%; margin: 0 auto; display: flex; align-items: center; justify-content: center; color: white;">2</div>
                        <div class="tree-label">èŠ‚ç‚¹2(çº¢)</div>
                    </div>
                    
                    <div class="tree" id="node3" style="top: 150px; left: 70%;">
                        <div style="width: 40px; height: 40px; background-color: #2ecc71; border-radius: 50%; margin: 0 auto; display: flex; align-items: center; justify-content: center; color: white;">3</div>
                        <div class="tree-label">èŠ‚ç‚¹3(ç»¿)</div>
                    </div>
                    
                    <!-- ç¬¬äºŒå±‚å­èŠ‚ç‚¹ -->
                    <div class="tree" id="node4" style="top: 250px; left: 20%;">
                        <div style="width: 40px; height: 40px; background-color: #e74c3c; border-radius: 50%; margin: 0 auto; display: flex; align-items: center; justify-content: center; color: white;">4</div>
                        <div class="tree-label">èŠ‚ç‚¹4(çº¢)</div>
                    </div>
                    
                    <div class="tree" id="node5" style="top: 250px; left: 40%;">
                        <div style="width: 40px; height: 40px; background-color: #3498db; border-radius: 50%; margin: 0 auto; display: flex; align-items: center; justify-content: center; color: white;">5</div>
                        <div class="tree-label">èŠ‚ç‚¹5(è“)</div>
                    </div>
                    
                    <div class="tree" id="node6" style="top: 250px; left: 80%;">
                        <div style="width: 40px; height: 40px; background-color: #2ecc71; border-radius: 50%; margin: 0 auto; display: flex; align-items: center; justify-content: center; color: white;">6</div>
                        <div class="tree-label">èŠ‚ç‚¹6(ç»¿)</div>
                    </div>
                    
                    <!-- è¿æ¥çº¿ -->
                    <svg width="100%" height="100%" style="position: absolute; top: 0; left: 0; pointer-events: none;">
                        <line x1="50%" y1="90" x2="30%" y2="150" stroke="#ccc" stroke-width="2"/>
                        <line x1="50%" y1="90" x2="70%" y2="150" stroke="#ccc" stroke-width="2"/>
                        <line x1="30%" y1="190" x2="20%" y2="250" stroke="#ccc" stroke-width="2"/>
                        <line x1="30%" y1="190" x2="40%" y2="250" stroke="#ccc" stroke-width="2"/>
                        <line x1="70%" y1="190" x2="80%" y2="250" stroke="#ccc" stroke-width="2"/>
                    </svg>
                </div>
                <div id="countDisplay">å½“å‰è®¡æ•°: 0</div>
                <div id="status" class="status-text">ç‚¹å‡»â€œå¼€å§‹â€æŒ‰é’®æŸ¥çœ‹è®¡æ•°è¿‡ç¨‹</div>
                <button id="startAnimation" style="align-self: center; margin-top: 10px;">å¼€å§‹</button>
            </div>
        </div>

        <!-- Slide 5: C++ ä»£ç å®ç° -->
        <div class="slide" id="slide-5">
            <div class="slide-header">
                <h2><span style="font-size: 1.5em; vertical-align: middle;">ğŸ’»</span> C++ ä»£ç å®ç°</h2>
            </div>
            <div class="slide-content" style="justify-content: flex-start;">
                <p><strong>æ ¸å¿ƒæ­¥éª¤ï¼š</strong></p>
                <ol>
                    <li>ä½¿ç”¨é‚»æ¥è¡¨è¡¨ç¤ºæ ‘ç»“æ„ã€‚</li>
                    <li>ä»æ ¹èŠ‚ç‚¹å¼€å§‹è¿›è¡Œæ·±åº¦ä¼˜å…ˆæœç´¢(DFS)ã€‚</li>
                    <li>å¯¹äºæ¯ä¸ªèŠ‚ç‚¹ï¼Œè®¡ç®—ä»¥è¯¥èŠ‚ç‚¹ä¸ºæ ¹çš„åŒè‰²å­æ ‘æ•°é‡ã€‚</li>
                    <li>å¦‚æœå­èŠ‚ç‚¹ä¸å½“å‰èŠ‚ç‚¹é¢œè‰²ç›¸åŒï¼Œåˆ™ç´¯åŠ å­èŠ‚ç‚¹çš„æœ‰æ•ˆå­æ ‘æ•°é‡ã€‚</li>
                    <li>å°†æ‰€æœ‰èŠ‚ç‚¹çš„æœ‰æ•ˆå­æ ‘æ•°é‡æ±‚å’Œï¼Œå¾—åˆ°æœ€ç»ˆç»“æœã€‚</li>
                </ol>
                <div class="code-block">
<pre>
<span class="preprocessor">#include &lt;bits/stdc++.h&gt;</span>
<span class="keyword">using</span> <span class="keyword">namespace</span> std;

<span class="preprocessor">#define endl '\n'</span>
<span class="preprocessor">#define fst ios::sync_with_stdio(false); cin.tie(0); cout.tie(0);</span>

<span class="type">vector</span>&lt;<span class="type">int</span>&gt; adj[<span class="number">100005</span>];  <span class="comment">// é‚»æ¥è¡¨å­˜å‚¨æ ‘</span>
<span class="type">int</span> color[<span class="number">100005</span>];        <span class="comment">// æ¯ä¸ªèŠ‚ç‚¹çš„é¢œè‰²</span>
<span class="type">long long</span> ans = <span class="number">0</span>;         <span class="comment">// æœ€ç»ˆç­”æ¡ˆ</span>

<span class="comment">// DFSå‡½æ•°ï¼Œè¿”å›ä»¥uä¸ºæ ¹çš„åŒè‰²å­æ ‘æ•°é‡</span>
<span class="type">int</span> <span class="function">dfs</span>(<span class="type">int</span> u, <span class="type">int</span> parent) {
    <span class="type">int</span> count = <span class="number">1</span>;  <span class="comment">// è‡³å°‘åŒ…å«è‡ªèº«èŠ‚ç‚¹</span>
    
    <span class="keyword">for</span>(<span class="type">int</span> v : adj[u]) {
        <span class="keyword">if</span>(v == parent) <span class="keyword">continue</span>;  <span class="comment">// è·³è¿‡çˆ¶èŠ‚ç‚¹</span>
        
        <span class="type">int</span> child_count = <span class="function">dfs</span>(v, u);
        
        <span class="comment">// å¦‚æœå­èŠ‚ç‚¹é¢œè‰²å’Œå½“å‰èŠ‚ç‚¹ç›¸åŒï¼Œåˆ™å¯ä»¥åˆå¹¶</span>
        <span class="keyword">if</span>(color[v] == color[u]) {
            count += child_count;
        }
    }
    
    ans += count;  <span class="comment">// ç´¯åŠ å½“å‰èŠ‚ç‚¹çš„åŒè‰²å­æ ‘æ•°é‡</span>
    <span class="keyword">return</span> count;
}

<span class="type">int</span> <span class="function">main</span>() {
    fst;
    <span class="type">int</span> n;
    cin >> n;
    
    <span class="comment">// è¯»å–é¢œè‰²</span>
    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i <= n; i++) {
        cin >> color[i];
    }
    
    <span class="comment">// æ„å»ºæ ‘</span>
    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i < n - <span class="number">1</span>; i++) {
        <span class="type">int</span> u, v;
        cin >> u >> v;
        adj[u].<span class="function">push_back</span>(v);
        adj[v].<span class="function">push_back</span>(u);
    }
    
    <span class="comment">// ä»æ ¹èŠ‚ç‚¹(å‡è®¾ä¸º1)å¼€å§‹DFS</span>
    <span class="function">dfs</span>(<span class="number">1</span>, <span class="number">-1</span>);
    
    cout << ans << endl;
    <span class="keyword">return</span> <span class="number">0</span>;
}
</pre>
                </div>
            </div>
        </div>

        <!-- Slide 6: çŸ¥è¯†ç‚¹æ€»ç»“ -->
        <div class="slide" id="slide-6">
            <div class="slide-header">
                <h2><span style="font-size: 1.5em; vertical-align: middle;">ğŸ§ </span> çŸ¥è¯†ç‚¹æ€»ç»“</h2>
            </div>
            <div class="slide-content">
                <div class="problem-box">
                    <h4>ç®—æ³•æ¨¡å‹ï¼šæ ‘å½¢ç»“æ„çš„å­æ ‘è®¡æ•°é—®é¢˜</h4>
                    <p>è¿™ç±»é—®é¢˜çš„å…±åŒç‰¹å¾æ˜¯ï¼š</p>
                    <ul>
                        <li>éœ€è¦å¯¹æ ‘å½¢ç»“æ„è¿›è¡Œéå†å’Œåˆ†æã€‚</li>
                        <li>é€šå¸¸æ¶‰åŠå­æ ‘çš„å±æ€§è®¡ç®—å’Œç»Ÿè®¡ã€‚</li>
                        <li>é€‚åˆä½¿ç”¨æ·±åº¦ä¼˜å…ˆæœç´¢(DFS)æˆ–å¹¿åº¦ä¼˜å…ˆæœç´¢(BFS)è§£å†³ã€‚</li>
                    </ul>
                </div>
                <div class="conclusion">
                    <strong>æ ¸å¿ƒè§£æ³•ï¼š</strong>åˆ©ç”¨DFSéå†æ ‘ï¼Œåœ¨å›æº¯è¿‡ç¨‹ä¸­è®¡ç®—æ¯ä¸ªèŠ‚ç‚¹çš„æœ‰æ•ˆå­æ ‘æ•°é‡ã€‚å½“å­èŠ‚ç‚¹ä¸çˆ¶èŠ‚ç‚¹æ»¡è¶³ç‰¹å®šæ¡ä»¶ï¼ˆå¦‚é¢œè‰²ç›¸åŒï¼‰æ—¶ï¼Œåˆå¹¶è®¡ç®—å®ƒä»¬çš„å­æ ‘æ•°é‡ï¼Œå¦åˆ™å•ç‹¬è®¡ç®—ã€‚è¿™ç§è‡ªåº•å‘ä¸Šçš„è®¡ç®—æ–¹å¼èƒ½é«˜æ•ˆè§£å†³é—®é¢˜ã€‚
                </div>
            </div>
        </div>

        <!-- å¯¼èˆª -->
        <button id="prevBtn" class="nav-button">â€¹</button>
        <button id="nextBtn" class="nav-button">â€º</button>
        <div id="slideCounter">1 / 6</div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // --- PPTç¿»é¡µé€»è¾‘ ---
            const slides = document.querySelectorAll('.slide');
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            const slideCounter = document.getElementById('slideCounter');
            let currentSlide = 0;
            const totalSlides = slides.length;

            function showSlide(index) {
                slides.forEach((slide, i) => {
                    slide.classList.toggle('active', i === index);
                });
                currentSlide = index;
                updateNav();
            }

            function updateNav() {
                prevBtn.disabled = currentSlide === 0;
                nextBtn.disabled = currentSlide === totalSlides - 1;
                slideCounter.textContent = `${currentSlide + 1} / ${totalSlides}`;
            }

            prevBtn.addEventListener('click', () => {
                if (currentSlide > 0) {
                    showSlide(currentSlide - 1);
                }
            });

            nextBtn.addEventListener('click', () => {
                if (currentSlide < totalSlides - 1) {
                    showSlide(currentSlide + 1);
                }
            });

            document.addEventListener('keydown', (e) => {
                if (e.key === 'ArrowLeft') {
                    prevBtn.click();
                } else if (e.key === 'ArrowRight') {
                    nextBtn.click();
                }
            });

            showSlide(0);

            // --- åŠ¨ç”»é€»è¾‘ ---
            const startBtn = document.getElementById('startAnimation');
            const statusText = document.getElementById('status');
            const countDisplay = document.getElementById('countDisplay');
            
            // æ ‘èŠ‚ç‚¹æ•°æ®ï¼šIDã€çˆ¶èŠ‚ç‚¹IDã€é¢œè‰²ã€å­èŠ‚ç‚¹
            const treeData = [
                {id: 'node1', parent: null, color: 'çº¢', children: ['node2', 'node3'], count: 0},
                {id: 'node2', parent: 'node1', color: 'çº¢', children: ['node4', 'node5'], count: 0},
                {id: 'node3', parent: 'node1', color: 'ç»¿', children: ['node6'], count: 0},
                {id: 'node4', parent: 'node2', color: 'çº¢', children: [], count: 0},
                {id: 'node5', parent: 'node2', color: 'è“', children: [], count: 0},
                {id: 'node6', parent: 'node3', color: 'ç»¿', children: [], count: 0}
            ];

            // é‡ç½®åŠ¨ç”»çŠ¶æ€
            function resetAnimation() {
                treeData.forEach(node => {
                    const el = document.getElementById(node.id);
                    el.classList.remove('selected', 'ignored');
                    node.count = 0;
                });
                countDisplay.textContent = 'å½“å‰è®¡æ•°: 0';
                statusText.textContent = 'ç‚¹å‡»â€œå¼€å§‹â€æŒ‰é’®æŸ¥çœ‹è®¡æ•°è¿‡ç¨‹';
                startBtn.disabled = false;
            }

            // å»¶è¿Ÿå‡½æ•°
            const delay = (ms) => new Promise(res => setTimeout(res, ms));

            // DFSéå†åŠ¨ç”»
            async function dfsAnimation(nodeId, parentId) {
                const node = treeData.find(n => n.id === nodeId);
                const el = document.getElementById(nodeId);
                
                // é«˜äº®å½“å‰èŠ‚ç‚¹
                el.classList.add('selected');
                statusText.textContent = `æ­£åœ¨å¤„ç†èŠ‚ç‚¹${nodeId.replace('node', '')}(${node.color})`;
                await delay(1000);
                
                // åˆå§‹è®¡æ•°ä¸º1ï¼ˆè‡ªèº«ï¼‰
                node.count = 1;
                statusText.textContent = `èŠ‚ç‚¹${nodeId.replace('node', '')}åˆå§‹è®¡æ•°: 1ï¼ˆè‡ªèº«ï¼‰`;
                await delay(1000);
                
                // å¤„ç†å­èŠ‚ç‚¹
                for (const childId of node.children) {
                    const child = treeData.find(n => n.id === childId);
                    await dfsAnimation(childId, nodeId);
                    
                    // æ£€æŸ¥å­èŠ‚ç‚¹é¢œè‰²æ˜¯å¦ä¸å½“å‰èŠ‚ç‚¹ç›¸åŒ
                    if (child.color === node.color) {
                        statusText.textContent = `èŠ‚ç‚¹${childId.replace('node', '')}ä¸èŠ‚ç‚¹${nodeId.replace('node', '')}é¢œè‰²ç›¸åŒï¼Œåˆå¹¶è®¡æ•°`;
                        node.count += child.count;
                        await delay(1500);
                        statusText.textContent = `èŠ‚ç‚¹${nodeId.replace('node', '')}å½“å‰è®¡æ•°: ${node.count}`;
                        await delay(1000);
                    } else {
                        statusText.textContent = `èŠ‚ç‚¹${childId.replace('node', '')}ä¸èŠ‚ç‚¹${nodeId.replace('node', '')}é¢œè‰²ä¸åŒï¼Œä¸åˆå¹¶`;
                        await delay(1500);
                    }
                }
                
                // ç´¯åŠ æ€»è®¡æ•°
                const total = treeData.reduce((sum, n) => sum + n.count, 0);
                countDisplay.textContent = `å½“å‰è®¡æ•°: ${total}`;
                
                // å¦‚æœä¸æ˜¯æ ¹èŠ‚ç‚¹ï¼Œæ ‡è®°ä¸ºå·²å¤„ç†
                if (parentId !== null) {
                    el.classList.remove('selected');
                    el.classList.add('ignored');
                }
                
                return node.count;
            }

            // å¼€å§‹åŠ¨ç”»
            startBtn.addEventListener('click', async () => {
                startBtn.disabled = true;
                resetAnimation();
                
                statusText.textContent = 'å¼€å§‹DFSéå†...';
                await delay(1000);
                
                // ä»æ ¹èŠ‚ç‚¹å¼€å§‹DFS
                await dfsAnimation('node1', null);
                
                const total = treeData.reduce((sum, n) => sum + n.count, 0);
                statusText.textContent = `éå†å®Œæˆï¼Œæ€»è®¡æ•°ä¸º: ${total}`;
                countDisplay.textContent = `æœ€ç»ˆè®¡æ•°: ${total}`;
                startBtn.disabled = false;
            });
        });
    </script>
</body>
</html>