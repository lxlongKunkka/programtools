<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è§£é¢˜æŠ¥å‘Š</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net.cn/npm/katex@0.16.9/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net.cn/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net.cn/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>
    <style>
        /* --- åŸºç¡€å’Œå¸ƒå±€ --- */
        html, body { height: 100%; margin: 0; overflow: hidden; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; background-color: #000; }
        .ppt-container { width: 100%; height: 100%; position: relative; }
        .slide { position: absolute; width: 100%; height: 100%; background-color: #ffffff; padding: 4vh 6vw 120px 6vw; box-sizing: border-box; display: flex; flex-direction: column; opacity: 0; visibility: hidden; transition: opacity 0.6s ease-in-out; overflow-y: auto; }
        .slide.active { opacity: 1; visibility: visible; z-index: 1; }
        
        /* --- å¯¼èˆªæŒ‰é’® --- */
        .nav-button { position: absolute; bottom: 30px; z-index: 10; background-color: rgba(0, 122, 255, 0.8); color: white; border: none; border-radius: 30px; padding: 10px 25px; font-size: 18px; font-weight: bold; cursor: pointer; box-shadow: 0 4px 15px rgba(0,0,0,0.3); transition: all 0.3s ease; display: flex; justify-content: center; align-items: center; backdrop-filter: blur(5px); }
        .nav-button:hover { background-color: #007aff; transform: translateY(-2px); box-shadow: 0 6px 20px rgba(0,0,0,0.4); }
        .nav-button:active { transform: translateY(1px); box-shadow: 0 2px 10px rgba(0,0,0,0.2); }
        #prevBtn { left: 30px; } #nextBtn { right: 30px; }
        #prevBtn:disabled, #nextBtn:disabled { background-color: #ccc; cursor: not-allowed; transform: none; box-shadow: none; opacity: 0.6; }
        #slideCounter { position: absolute; top: 20px; right: 20px; z-index: 5; background-color: rgba(0,0,0,0.6); color: white; padding: 8px 20px; border-radius: 20px; font-size: 16px; font-weight: 500; letter-spacing: 1px; backdrop-filter: blur(5px); }

        /* --- Logo --- */
        .logo { position: absolute; top: 20px; left: 20px; width: 120px; height: auto; z-index: 15; opacity: 0.8; }

        /* --- å†…å®¹æ ·å¼ --- */
        .slide-header { flex-shrink: 0; }
        .slide-content { flex-grow: 1; display: flex; flex-direction: column; justify-content: center; }
        h1 { font-size: clamp(2.5em, 5vw, 4em); color: #333; margin: 0; text-align: center; }
        h2 { font-size: clamp(2em, 4vw, 2.8em); color: #007aff; border-bottom: 3px solid #f0f2f5; padding-bottom: 15px; margin-top: 0; margin-bottom: 2vh; }
        h3 { font-size: clamp(1.5em, 3vw, 2em); color: #007aff; margin-top: 20px; margin-bottom: 10px; }
        h4 { font-size: clamp(1.3em, 2.8vw, 1.8em); color: #333; margin-top: 15px; margin-bottom: 8px; }
        p, li { font-size: clamp(1.2em, 2.5vw, 1.5em); line-height: 1.6; color: #444; }
        .problem-box { background-color: #f8f9fa; padding: 20px; border-radius: 8px; border: 1px solid #e9ecef; font-size: clamp(1.1em, 2.2vw, 1.4em); }
        .conclusion { margin-top: 3vh; padding: 15px; background-color: #e6f7ff; border-left: 5px solid #1890ff; border-radius: 4px; font-style: italic; font-size: clamp(1.1em, 2.2vw, 1.4em); }
        
        /* --- ä»£ç å—æ ·å¼ --- */
        .code-block { background-color: #ffffff; color: #333333; padding: 20px; border-radius: 8px; border: 1px solid #ddd; font-family: "Courier New", Courier, monospace; white-space: pre-wrap; margin-top: 2vh; font-size: clamp(1em, 2vw, 1.2em); box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .code-block .comment { color: #008000; font-style: italic; }
        .code-block .keyword { color: #0000ff; font-weight: bold; }
        .code-block .type { color: #2b91af; }
        .code-block .number { color: #a31515; }
        .code-block .string { color: #a31515; }
        .code-block .preprocessor { color: #808080; }

        /* --- åŠ¨ç”»æ¼”ç¤ºåŒºåŸŸ (æ ¹æ®é¢˜ç›®è‡ªå®šä¹‰) --- */
        .animation-area { 
            min-height: 400px; 
            position: relative; 
            border: 2px dashed #ccc; 
            margin-top: 2vh; 
            padding: 10px; 
            overflow: auto; /* Allow scrolling if content is too large */
            display: flex; 
            justify-content: center; 
            align-items: center; 
            flex-direction: column; /* Stack elements vertically */
            background-color: #fdfdfd;
            border-radius: 8px;
        }
        .grid-container {
            display: grid;
            gap: 2px;
            border: 1px solid #eee;
            padding: 5px;
            background-color: #f0f0f0;
            border-radius: 5px;
            margin-bottom: 10px;
        }
        .grid-cell {
            width: 48px;
            height: 48px;
            display: flex;
            justify-content: center;
            align-items: center;
            border: 1px solid #ccc;
            background-color: #fff;
            color: #333;
            font-weight: bold;
            font-size: 18px;
            border-radius: 3px;
            transition: all 0.2s ease-in-out;
        }
        .grid-cell.black {
            background-color: #333;
            color: #fff;
        }
        .grid-cell.highlight {
            background-color: #ffeb3b; /* Yellow for highlight */
            color: #333;
            box-shadow: 0 0 8px rgba(255, 235, 59, 0.8);
            transform: scale(1.05);
        }
    </style>
</head>
<body>
    <div class="ppt-container">
        <img src="https://qimai-1312947209.cos.ap-shanghai.myqcloud.com/images/qimailogo.png" class="logo" alt="Logo">
        <!-- Slide 1: å°é¢ -->
        <div class="slide active">
            <div class="slide-content" style="align-items: center; text-align: center;">
                <div style="font-size: 5em; margin-bottom: 20px;">ğŸ†</div>
                <h1>ç½‘æ ¼æ—‹è½¬æ›¿æ¢</h1>
                <h3>â€”â€” çŸ©é˜µåˆ†å±‚åŸåœ°æ—‹è½¬æ¨¡æ‹Ÿ</h3>
            </div>
        </div>

        <!-- Slide 2: é¢˜ç›® -->
        <div class="slide">
            <div class="slide-header"><h2>ğŸ“ é¢˜ç›®è§£æ</h2></div>
            <div class="slide-content" style="justify-content: flex-start;">
                <div class="problem-box">
                    <p><strong>é¢˜ç›®æ ¸å¿ƒï¼š</strong>ç»™å®šä¸€ä¸ª $N \times N$ çš„ç½‘æ ¼ï¼Œå…¶ä¸­ $N$ æ˜¯å¶æ•°ã€‚ç½‘æ ¼ä¸­çš„æ ¼å­ä¸ºé»‘è‰²ï¼ˆ`#`ï¼‰æˆ–ç™½è‰²ï¼ˆ`.`ï¼‰ã€‚éœ€è¦å¯¹ç½‘æ ¼è¿›è¡Œ $N/2$ æ¬¡æ“ä½œï¼Œæ¯æ¬¡æ“ä½œå¤„ç†ä¸€ä¸ªâ€œå±‚â€ï¼ˆä»å¤–åˆ°å†…ï¼‰ã€‚å¯¹äºç¬¬ $i$ å±‚ï¼Œæ‰€æœ‰æ»¡è¶³ $i \le x \le N+1-i$ ä¸” $i \le y \le N+1-i$ çš„æ ¼å­ $(x, y)$ï¼Œå…¶é¢œè‰²ä¼šæ›¿æ¢åˆ°æ ¼å­ $(y, N+1-x)$ ä¸Šã€‚æ‰€æœ‰æ›¿æ¢æ“ä½œå¿…é¡»**åŒæ—¶è¿›è¡Œ**ã€‚</p>
                    <p><strong>è¾“å…¥æ ¼å¼ï¼š</strong></p>
                    <ul>
                        <li>ç¬¬ä¸€è¡ŒåŒ…å«ä¸€ä¸ªæ•´æ•° $N$ã€‚</li>
                        <li>æ¥ä¸‹æ¥ $N$ è¡Œï¼Œæ¯è¡ŒåŒ…å« $N$ ä¸ªå­—ç¬¦ï¼Œè¡¨ç¤ºç½‘æ ¼ $A_{i,j}$ çš„åˆå§‹é¢œè‰²ã€‚</li>
                    </ul>
                    <p><strong>è¾“å‡ºæ ¼å¼ï¼š</strong></p>
                    <ul>
                        <li>è¾“å‡º $N$ è¡Œï¼Œæ¯è¡Œ $N$ ä¸ªå­—ç¬¦ï¼Œè¡¨ç¤ºæ‰€æœ‰æ“ä½œç»“æŸåç½‘æ ¼ $B_{i,j}$ çš„æœ€ç»ˆé¢œè‰²ã€‚</li>
                    </ul>
                    <p><strong>æ•°æ®èŒƒå›´ï¼š</strong></p>
                    <ul>
                        <li>$N$ æ˜¯ $2$ åˆ° $3000$ ä¹‹é—´çš„å¶æ•°ã€‚</li>
                        <li>$A_{i, j}$ åªå¯èƒ½æ˜¯ `#` æˆ– `.`ã€‚</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Slide 3: æ€è·¯ -->
        <div class="slide">
            <div class="slide-header"><h2>ğŸ¤” æ€è·¯æ¢è®¨</h2></div>
            <div class="slide-content" style="justify-content: flex-start; overflow-y: auto;">
                <div class="content-body">
                    <p>æœ¬é¢˜è¦æ±‚æˆ‘ä»¬å¯¹ä¸€ä¸ª $N \times N$ çš„ç½‘æ ¼è¿›è¡Œä¸€ç³»åˆ—ç‰¹æ®Šçš„æ—‹è½¬æ“ä½œã€‚ç†è§£é¢˜æ„ä¸­çš„â€œåŒæ—¶è¿›è¡Œâ€å’Œåæ ‡è½¬æ¢æ˜¯è§£å†³é—®é¢˜çš„å…³é”®ã€‚</p>

                    <h3>1. ç†è§£æ“ä½œï¼šçŸ©é˜µæ—‹è½¬</h3>
                    <p>é¢˜ç›®ä¸­æè¿°çš„æ›¿æ¢æ“ä½œæ˜¯ï¼šå°†æ ¼å­ $(x, y)$ çš„é¢œè‰²æ›¿æ¢åˆ°æ ¼å­ $(y, N+1-x)$ã€‚è¿™é‡Œçš„ $(x, y)$ å’Œ $(y, N+1-x)$ éƒ½æ˜¯ 1-indexed åæ ‡ã€‚</p>
                    <ul>
                        <li>å¦‚æœæˆ‘ä»¬å°†ä¸€ä¸ªç‚¹ $(x, y)$ é¡ºæ—¶é’ˆæ—‹è½¬ $90^\circ$ å¾—åˆ°çš„æ–°åæ ‡ï¼Œåœ¨ 1-indexed åæ ‡ç³»ä¸‹ï¼Œé€šå¸¸æ˜¯ $(y, N+1-x)$ã€‚</li>
                        <li>ä¾‹å¦‚ï¼Œå¯¹äºä¸€ä¸ª $N \times N$ çŸ©é˜µï¼Œç‚¹ $(1, 1)$ æ—‹è½¬åå˜ä¸º $(1, N)$ï¼›ç‚¹ $(1, N)$ æ—‹è½¬åå˜ä¸º $(N, N)$ï¼›ç‚¹ $(N, N)$ æ—‹è½¬åå˜ä¸º $(N, 1)$ï¼›ç‚¹ $(N, 1)$ æ—‹è½¬åå˜ä¸º $(1, 1)$ã€‚
                            <ul>
                                <li>$(1, 1) \to (1, N+1-1) = (1, N)$</li>
                                <li>$(1, N) \to (N, N+1-1) = (N, N)$</li>
                                <li>$(N, N) \to (N, N+1-N) = (N, 1)$</li>
                                <li>$(N, 1) \to (1, N+1-N) = (1, 1)$</li>
                            </ul>
                        </li>
                    </ul>
                    <p>è¿™ä¸é¢˜ç›®ç»™å‡ºçš„è½¬æ¢è§„åˆ™å®Œå…¨ä¸€è‡´ï¼Œå› æ­¤ï¼Œæ¯æ¬¡æ“ä½œå®é™…ä¸Šæ˜¯å¯¹ä¸€ä¸ªæ­£æ–¹å½¢åŒºåŸŸè¿›è¡Œ**é¡ºæ—¶é’ˆ $90^\circ$ æ—‹è½¬**ã€‚</p>

                    <h3>2. ç†è§£â€œåŒæ—¶è¿›è¡Œâ€</h3>
                    <p>â€œæ‰€æœ‰æ»¡è¶³æ¡ä»¶çš„ $x, y$ çš„æ›¿æ¢æ“ä½œæ˜¯åŒæ—¶è¿›è¡Œçš„ã€‚â€è¿™æ„å‘³ç€åœ¨æ›´æ–°æŸä¸ªæ ¼å­æ—¶ï¼Œä¸èƒ½ä½¿ç”¨å·²ç»è¢«å½“å‰æ“ä½œæ›´æ–°è¿‡çš„å€¼ã€‚ä¾‹å¦‚ï¼Œå¦‚æœ $A \to B$ ä¸” $B \to C$ï¼Œé‚£ä¹ˆ $B$ çš„æ–°å€¼åº”è¯¥æ¥è‡ª $A$ çš„æ—§å€¼ï¼Œè€Œ $C$ çš„æ–°å€¼åº”è¯¥æ¥è‡ª $B$ çš„æ—§å€¼ã€‚å¦‚æœç›´æ¥åŸåœ°æ›´æ–°ï¼Œå¯èƒ½ä¼šå¯¼è‡´é”™è¯¯ã€‚</p>
                    <p>è§£å†³â€œåŒæ—¶è¿›è¡Œâ€æœ‰ä¸¤ç§å¸¸è§æ–¹æ³•ï¼š</p>
                    <ul>
                        <li><strong>ä½¿ç”¨ä¸´æ—¶æ•°ç»„ï¼š</strong>å¤åˆ¶ä¸€ä»½å½“å‰ç½‘æ ¼ï¼Œç„¶ååœ¨æ–°ç½‘æ ¼ä¸Šè¿›è¡Œæ›´æ–°ã€‚ä½†è¿™ä¼šå¢åŠ  $O(N^2)$ çš„ç©ºé—´å¤æ‚åº¦ï¼Œå¯¹äº $N=3000$ æ¥è¯´ï¼Œå†…å­˜å¯èƒ½ä¸è¶³ã€‚</li>
                        <li><strong>åŸåœ°å››ç‚¹äº¤æ¢ï¼š</strong>å¯¹äºçŸ©é˜µçš„ $90^\circ$ æ—‹è½¬ï¼Œæˆ‘ä»¬å¯ä»¥è§‚å¯Ÿåˆ°å››ä¸ªç‚¹ä¼šå½¢æˆä¸€ä¸ªå¾ªç¯ï¼š
                            $$(x, y) \to (y, N+1-x) \to (N+1-x, N+1-y) \to (N+1-y, x) \to (x, y)$$
                            è¿™å››ä¸ªç‚¹çš„å€¼ä¼šè¿›è¡Œå¾ªç¯ç§»åŠ¨ã€‚æˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªä¸´æ—¶å˜é‡å­˜å‚¨ç¬¬ä¸€ä¸ªç‚¹çš„å€¼ï¼Œç„¶åä¾æ¬¡å°†å‰ä¸€ä¸ªç‚¹çš„å€¼èµ‹ç»™åä¸€ä¸ªç‚¹ï¼Œæœ€åå°†ä¸´æ—¶å˜é‡èµ‹ç»™æœ€åä¸€ä¸ªç‚¹ï¼Œä»è€Œå®ç°åŸåœ°äº¤æ¢ã€‚</li>
                    </ul>

                    <h3>3. åˆ†å±‚å¤„ç†</h3>
                    <p>é¢˜ç›®è¦æ±‚å¯¹ $i = 1, 2, \ldots, N/2$ ä¾æ¬¡æ‰§è¡Œæ“ä½œã€‚è¿™è¡¨æ˜æˆ‘ä»¬éœ€è¦ä»æœ€å¤–å±‚å¼€å§‹ï¼Œä¸€å±‚ä¸€å±‚å‘å†…å¤„ç†ã€‚æ¯ä¸€å±‚å½¢æˆä¸€ä¸ªâ€œç¯â€æˆ–â€œæ­£æ–¹å½¢è¾¹æ¡†â€ã€‚</p>
                    <ul>
                        <li>å½“ $i=1$ æ—¶ï¼Œå¤„ç†çš„æ˜¯æ•´ä¸ª $N \times N$ çŸ©é˜µçš„æœ€å¤–å±‚è¾¹æ¡†ã€‚</li>
                        <li>å½“ $i=2$ æ—¶ï¼Œå¤„ç†çš„æ˜¯å»é™¤æœ€å¤–å±‚è¾¹æ¡†åï¼Œå†…éƒ¨ $(N-2) \times (N-2)$ çŸ©é˜µçš„æœ€å¤–å±‚è¾¹æ¡†ï¼Œä»¥æ­¤ç±»æ¨ã€‚</li>
                        <li>æ€»å…±æœ‰ $N/2$ å±‚éœ€è¦å¤„ç†ã€‚</li>
                    </ul>

                    <h3>4. ç»¼åˆè§£æ³•ï¼šåˆ†å±‚åŸåœ°å››ç‚¹äº¤æ¢</h3>
                    <p>ç»“åˆä»¥ä¸Šåˆ†æï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºé«˜æ•ˆçš„è§£æ³•ï¼š</p>
                    <ol>
                        <li>å°† 1-indexed åæ ‡è½¬æ¢ä¸º 0-indexed åæ ‡ï¼Œæ–¹ä¾¿æ•°ç»„æ“ä½œã€‚
                            <ul>
                                <li>1-indexed $(x, y)$ å¯¹åº” 0-indexed $(x-1, y-1)$ã€‚</li>
                                <li>1-indexed $N+1-k$ å¯¹åº” 0-indexed $N-1-(k-1) = N-k$ã€‚</li>
                                <li>å› æ­¤ï¼Œ1-indexed $(y, N+1-x)$ å¯¹åº” 0-indexed $(y-1, N-(x-1)-1) = (y-1, N-x)$ã€‚</li>
                            </ul>
                        </li>
                        <li>å¤–å±‚å¾ªç¯ $k$ ä» $0$ åˆ° $N/2 - 1$ï¼Œè¡¨ç¤ºå½“å‰å¤„ç†çš„å±‚æ•°ï¼ˆ0-indexedï¼‰ã€‚</li>
                        <li>å¯¹äºæ¯ä¸€å±‚ $k$ï¼Œå…¶å¯¹åº”çš„æ­£æ–¹å½¢åŒºåŸŸçš„å·¦ä¸Šè§’æ˜¯ $(k, k)$ï¼Œå³ä¸‹è§’æ˜¯ $(N-1-k, N-1-k)$ã€‚</li>
                        <li>å†…å±‚å¾ªç¯ $j$ ä» $k$ åˆ° $N-1-k-1$ (å³ $N-k-2$)ã€‚è¿™ä¸ªå¾ªç¯éå†äº†å½“å‰å±‚æ­£æ–¹å½¢çš„â€œä¸Šè¾¹â€éƒ¨åˆ†ï¼ˆä¸åŒ…æ‹¬å³ä¸‹è§’ï¼‰ã€‚</li>
                        <li>å¯¹äºæ¯ä¸ª $(k, j)$ (0-indexed)ï¼Œæ‰§è¡Œå››ç‚¹åŸåœ°äº¤æ¢ï¼š
                            <ul>
                                <li>ç‚¹ $P_1 = (k, j)$</li>
                                <li>ç‚¹ $P_2 = (N-1-j, k)$</li>
                                <li>ç‚¹ $P_3 = (N-1-k, N-1-j)$</li>
                                <li>ç‚¹ $P_4 = (j, N-1-k)$</li>
                            </ul>
                            äº¤æ¢é¡ºåºä¸ºï¼š$P_2 \to P_1$, $P_3 \to P_2$, $P_4 \to P_3$, $P_1 \text{(æ—§å€¼)} \to P_4$ã€‚
                            å…·ä½“æ“ä½œï¼š
                            <pre>
                            <span class="type">char</span> <span class="variable">temp</span> = <span class="variable">grid</span>[<span class="variable">k</span>][<span class="variable">j</span>];
                            <span class="variable">grid</span>[<span class="variable">k</span>][<span class="variable">j</span>] = <span class="variable">grid</span>[<span class="variable">N</span> - 1 - <span class="variable">j</span>][<span class="variable">k</span>];
                            <span class="variable">grid</span>[<span class="variable">N</span> - 1 - <span class="variable">j</span>][<span class="variable">k</span>] = <span class="variable">grid</span>[<span class="variable">N</span> - 1 - <span class="variable">k</span>][<span class="variable">N</span> - 1 - <span class="variable">j</span>];
                            <span class="variable">grid</span>[<span class="variable">N</span> - 1 - <span class="variable">k</span>][<span class="variable">N</span> - 1 - <span class="variable">j</span>] = <span class="variable">grid</span>[<span class="variable">j</span>][<span class="variable">N</span> - 1 - <span class="variable">k</span>];
                            <span class="variable">grid</span>[<span class="variable">j</span>][<span class="variable">N</span> - 1 - <span class="variable">k</span>] = <span class="variable">temp</span>;
                            </pre>
                        </li>
                    </ol>
                    <p>è¿™æ ·ï¼Œæˆ‘ä»¬å°±èƒ½åœ¨ $O(N^2)$ æ—¶é—´å¤æ‚åº¦å’Œ $O(N^2)$ ç©ºé—´å¤æ‚åº¦å†…å®Œæˆæ‰€æœ‰æ“ä½œã€‚</p>
                </div>
            </div>
        </div>

        <!-- Slide 4: æ¼”ç¤º (è¯·æ ¹æ®é¢˜ç›®ç”Ÿæˆå…·ä½“çš„ HTML/JS åŠ¨ç”») -->
        <div class="slide">
            <div class="slide-header"><h2>ğŸ¬ ç®—æ³•æ¼”ç¤º</h2></div>
            <div class="slide-content" style="justify-content: flex-start;">
                <div class="animation-area" id="animArea">
                    <!-- åœ¨è¿™é‡Œæ’å…¥å¯è§†åŒ–å…ƒç´  -->
                </div>
                <div id="stepDescription" style="margin-top: 15px; padding: 15px; background: #f8f9fa; border-left: 4px solid #007aff; border-radius: 4px; min-height: 60px; font-size: 1.1em; color: #333;">
                    å‡†å¤‡å°±ç»ªï¼Œè¯·ç‚¹å‡»â€œä¸‹ä¸€æ­¥â€å¼€å§‹æ¼”ç¤º
                </div>
                <div style="margin-top: 20px; display: flex; gap: 15px; justify-content: center;">
                    <button id="prevStepBtn" style="padding: 8px 20px; font-size: 16px; cursor: pointer; background-color: #6c757d; color: white; border: none; border-radius: 4px;">ä¸Šä¸€æ­¥</button>
                    <button id="nextStepBtn" style="padding: 8px 20px; font-size: 16px; cursor: pointer; background-color: #007aff; color: white; border: none; border-radius: 4px;">ä¸‹ä¸€æ­¥</button>
                    <button id="resetBtn" style="padding: 8px 20px; font-size: 16px; cursor: pointer; background-color: #dc3545; color: white; border: none; border-radius: 4px;">é‡ç½®</button>
                </div>
            </div>
        </div>

        <!-- Slide 5: ä»£ç  -->
        <div class="slide">
            <div class="slide-header"><h2>ğŸ’» ä»£ç å®ç°</h2></div>
            <div class="slide-content" style="justify-content: flex-start;">
                <div class="code-block">
<pre>
<span class="preprocessor">#include &lt;iostream&gt;</span> <span class="comment">// å¼•å…¥æ ‡å‡†è¾“å…¥è¾“å‡ºåº“ï¼Œç”¨äºè¯»å†™æ•°æ®</span>
<span class="preprocessor">#include &lt;string&gt;</span>   <span class="comment">// å¼•å…¥å­—ç¬¦ä¸²åº“ï¼Œå°½ç®¡è¿™é‡Œç”¨charæ•°ç»„ï¼Œä½†æœ‰æ—¶è¯»ä¸€è¡Œä¼šç”¨åˆ°</span>

<span class="comment">// å®šä¹‰ç½‘æ ¼çš„æœ€å¤§å°ºå¯¸ï¼Œæ ¹æ®é¢˜ç›® N <= 3000ï¼Œæ‰€ä»¥å®šä¹‰ä¸º 3005 è¶³å¤Ÿ</span>
<span class="keyword">const</span> <span class="type">int</span> <span class="variable">MAXN</span> = 3005; 
<span class="type">char</span> <span class="variable">grid</span>[<span class="variable">MAXN</span>][<span class="variable">MAXN</span>]; <span class="comment">// ä½¿ç”¨é™æ€äºŒç»´å­—ç¬¦æ•°ç»„å­˜å‚¨ç½‘æ ¼æ•°æ®</span>

<span class="type">int</span> <span class="function">main</span>() {
    <span class="comment">// ä¼˜åŒ–C++æ ‡å‡†è¾“å…¥è¾“å‡ºæµï¼Œè§£é™¤ä¸Cæ ‡å‡†åº“çš„åŒæ­¥ï¼Œå¹¶å–æ¶ˆcin/coutçš„ç»‘å®šï¼Œæé«˜æ•ˆç‡</span>
    <span class="type">std::ios_base::sync_with_stdio</span>(<span class="keyword">false</span>);
    <span class="type">std::cin.tie</span>(<span class="keyword">NULL</span>);

    <span class="type">int</span> <span class="variable">N</span>; <span class="comment">// å£°æ˜æ•´æ•°Nï¼Œè¡¨ç¤ºç½‘æ ¼çš„è¾¹é•¿</span>
    <span class="type">std::cin</span> >> <span class="variable">N</span>; <span class="comment">// è¯»å–Nçš„å€¼</span>

    <span class="comment">// å¾ªç¯è¯»å–Nè¡ŒNåˆ—çš„ç½‘æ ¼æ•°æ®</span>
    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> = <span class="number">0</span>; <span class="variable">i</span> < <span class="variable">N</span>; ++<span class="variable">i</span>) {
        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> = <span class="number">0</span>; <span class="variable">j</span> < <span class="variable">N</span>; ++<span class="variable">j</span>) {
            <span class="type">std::cin</span> >> <span class="variable">grid</span>[<span class="variable">i</span>][<span class="variable">j</span>]; <span class="comment">// è¯»å–æ¯ä¸ªæ ¼å­çš„å­—ç¬¦ï¼ˆ'#' æˆ– '.'ï¼‰</span>
        }
    }

    <span class="comment">// é¢˜ç›®è¦æ±‚å¯¹ i = 1, 2, ..., N/2 æ‰§è¡Œæ“ä½œã€‚</span>
    <span class="comment">// è¿™é‡Œçš„ i æ˜¯ 1-indexed çš„å±‚æ•°ã€‚</span>
    <span class="comment">// åœ¨ 0-indexed æ•°ç»„ä¸­ï¼Œå±‚æ•° k ä» 0 åˆ° N/2 - 1ã€‚</span>
    <span class="comment">// æ¯ä¸€å±‚ k å¯¹åº”ä¸€ä¸ªä» (k, k) åˆ° (N-1-k, N-1-k) çš„æ­£æ–¹å½¢åŒºåŸŸã€‚</span>
    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">k</span> = <span class="number">0</span>; <span class="variable">k</span> < <span class="variable">N</span> / <span class="number">2</span>; ++<span class="variable">k</span>) {
        <span class="comment">// å¯¹äºæ¯ä¸€å±‚ kï¼Œæˆ‘ä»¬åªéœ€è¦éå†å…¶â€œä¸Šè¾¹â€çš„å…ƒç´ ï¼Œè¿›è¡Œå››ç‚¹äº¤æ¢ã€‚</span>
        <span class="comment">// éå†çš„åˆ—ç´¢å¼• j ä» k åˆ° N-1-k-1 (å³ N-k-2)ã€‚</span>
        <span class="comment">// è¿™æ ·å¯ä»¥è¦†ç›–è¯¥å±‚æ‰€æœ‰éœ€è¦æ—‹è½¬çš„å…ƒç´ ï¼Œé¿å…é‡å¤å¤„ç†ã€‚</span>
        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> = <span class="variable">k</span>; <span class="variable">j</span> < <span class="variable">N</span> - <span class="number">1</span> - <span class="variable">k</span>; ++<span class="variable">j</span>) {
            <span class="comment">// å®šä¹‰å››ä¸ªå‚ä¸é¡ºæ—¶é’ˆæ—‹è½¬çš„ç‚¹çš„ 0-indexed åæ ‡ï¼š</span>
            <span class="comment">// P1: (k, j) - å½“å‰å±‚ä¸Šè¾¹çš„ä¸€ä¸ªç‚¹ (æºç‚¹)</span>
            <span class="comment">// P2: (N-1-j, k) - å½“å‰å±‚å·¦è¾¹çš„ä¸€ä¸ªç‚¹</span>
            <span class="comment">// P3: (N-1-k, N-1-j) - å½“å‰å±‚ä¸‹è¾¹çš„ä¸€ä¸ªç‚¹</span>
            <span class="comment">// P4: (j, N-1-k) - å½“å‰å±‚å³è¾¹çš„ä¸€ä¸ªç‚¹</span>

            <span class="comment">// 1. æš‚å­˜ P1 çš„å€¼ï¼Œå› ä¸º P1 çš„å€¼ä¼šè¢« P2 çš„å€¼è¦†ç›–</span>
            <span class="type">char</span> <span class="variable">temp</span> = <span class="variable">grid</span>[<span class="variable">k</span>][<span class="variable">j</span>];

            <span class="comment">// 2. å°† P2 çš„å€¼èµ‹ç»™ P1 (å³ P2 -> P1)</span>
            <span class="variable">grid</span>[<span class="variable">k</span>][<span class="variable">j</span>] = <span class="variable">grid</span>[<span class="variable">N</span> - <span class="number">1</span> - <span class="variable">j</span>][<span class="variable">k</span>];

            <span class="comment">// 3. å°† P3 çš„å€¼èµ‹ç»™ P2 (å³ P3 -> P2)</span>
            <span class="variable">grid</span>[<span class="variable">N</span> - <span class="number">1</span> - <span class="variable">j</span>][<span class="variable">k</span>] = <span class="variable">grid</span>[<span class="variable">N</span> - <span class="number">1</span> - <span class="variable">k</span>][<span class="variable">N</span> - <span class="number">1</span> - <span class="variable">j</span>];

            <span class="comment">// 4. å°† P4 çš„å€¼èµ‹ç»™ P3 (å³ P4 -> P3)</span>
            <span class="variable">grid</span>[<span class="variable">N</span> - <span class="number">1</span> - <span class="variable">k</span>][<span class="variable">N</span> - <span class="number">1</span> - <span class="variable">j</span>] = <span class="variable">grid</span>[<span class="variable">j</span>][<span class="variable">N</span> - <span class="number">1</span> - <span class="variable">k</span>];

            <span class="comment">// 5. å°†æš‚å­˜çš„ P1 æ—§å€¼èµ‹ç»™ P4 (å³ P1(æ—§) -> P4)</span>
            <span class="variable">grid</span>[<span class="variable">j</span>][<span class="variable">N</span> - <span class="number">1</span> - <span class="variable">k</span>] = <span class="variable">temp</span>;
        }
    }

    <span class="comment">// æ‰€æœ‰æ“ä½œç»“æŸåï¼Œè¾“å‡ºæœ€ç»ˆçš„ç½‘æ ¼çŠ¶æ€</span>
    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> = <span class="number">0</span>; <span class="variable">i</span> < <span class="variable">N</span>; ++<span class="variable">i</span>) {
        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> = <span class="number">0</span>; <span class="variable">j</span> < <span class="variable">N</span>; ++<span class="variable">j</span>) {
            <span class="type">std::cout</span> << <span class="variable">grid</span>[<span class="variable">i</span>][<span class="variable">j</span>]; <span class="comment">// è¾“å‡ºå½“å‰æ ¼å­çš„å­—ç¬¦</span>
        }
        <span class="type">std::cout</span> << <span class="string">"\n"</span>; <span class="comment">// æ¯è¡Œç»“æŸåè¾“å‡ºæ¢è¡Œç¬¦</span>
    }

    <span class="keyword">return</span> <span class="number">0</span>; <span class="comment">// ç¨‹åºæ­£å¸¸ç»“æŸ</span>
}
</pre>
                </div>
            </div>
        </div>

        <!-- Slide 6: æ€»ç»“ -->
        <div class="slide">
            <div class="slide-header"><h2>ğŸ§  çŸ¥è¯†ç‚¹æ€»ç»“</h2></div>
            <div class="slide-content">
                <div class="conclusion">
                    <p><strong>æ—¶é—´å¤æ‚åº¦ï¼š</strong>$O(N^2)$ã€‚</p>
                    <p>å¤–å±‚å¾ªç¯ $k$ è¿è¡Œ $N/2$ æ¬¡ï¼Œå†…å±‚å¾ªç¯ $j$ è¿è¡Œå¤§çº¦ $N$ æ¬¡ã€‚æ¯æ¬¡å¾ªç¯å†…éƒ¨æ˜¯å¸¸æ•°æ¬¡æ“ä½œã€‚å› æ­¤æ€»æ“ä½œæ¬¡æ•°çº¦ä¸º $\frac{N}{2} \times N = O(N^2)$ã€‚</p>
                    <p><strong>ç©ºé—´å¤æ‚åº¦ï¼š</strong>$O(N^2)$ã€‚</p>
                    <p>ä¸»è¦ç”¨äºå­˜å‚¨ $N \times N$ çš„ç½‘æ ¼æ•°æ®ã€‚</p>
                    <p><strong>æ ¸å¿ƒç®—æ³•ï¼š</strong></p>
                    <ul>
                        <li><strong>æ¨¡æ‹Ÿï¼š</strong>ç›´æ¥æŒ‰ç…§é¢˜ç›®æè¿°çš„è§„åˆ™è¿›è¡Œæ“ä½œã€‚</li>
                        <li><strong>çŸ©é˜µæ—‹è½¬ï¼š</strong>ç†è§£æ“ä½œæœ¬è´¨æ˜¯çŸ©é˜µçš„é¡ºæ—¶é’ˆ $90^\circ$ æ—‹è½¬ã€‚</li>
                        <li><strong>åˆ†å±‚å¤„ç†ï¼š</strong>å°†æ•´ä¸ªç½‘æ ¼æ“ä½œåˆ†è§£ä¸ºå¯¹ä¸åŒâ€œå±‚â€æˆ–â€œç¯â€çš„ç‹¬ç«‹æ“ä½œã€‚</li>
                        <li><strong>åŸåœ°å››ç‚¹äº¤æ¢ï¼š</strong>åˆ©ç”¨æ—‹è½¬çš„å¾ªç¯ç‰¹æ€§ï¼Œé€šè¿‡ä¸€ä¸ªä¸´æ—¶å˜é‡å®ç°å››ä¸ªç‚¹å€¼çš„å¾ªç¯ç§»åŠ¨ï¼Œé¿å…ä½¿ç”¨é¢å¤–çš„å¤§ç©ºé—´ã€‚</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Slide 7: åæ€ä¸æ‰©å±• -->
        <div class="slide">
            <div class="slide-header"><h2>ğŸ’¡ åæ€ä¸æ‰©å±•</h2></div>
            <div class="slide-content" style="justify-content: flex-start;">
                <div style="font-size: 1.1em; line-height: 1.6;">
                    <p><strong>âš ï¸ æ˜“é”™ç‚¹ï¼š</strong></p>
                    <ul>
                        <li><strong>1-indexed ä¸ 0-indexed è½¬æ¢ï¼š</strong>é¢˜ç›®ä½¿ç”¨ 1-indexed åæ ‡ï¼Œè€Œ C++ æ•°ç»„é€šå¸¸æ˜¯ 0-indexedã€‚æ­£ç¡®è½¬æ¢åæ ‡æ˜¯å…³é”®ï¼Œä¾‹å¦‚ 1-indexed çš„ $N+1-k$ å¯¹åº” 0-indexed çš„ $N-1-(k-1) = N-k$ã€‚</li>
                        <li><strong>å¾ªç¯è¾¹ç•Œï¼š</strong>åˆ†å±‚å¤„ç†æ—¶ï¼Œæ¯ä¸€å±‚çš„å¾ªç¯èŒƒå›´éœ€è¦ä»”ç»†ç¡®å®šï¼Œç¡®ä¿ä¸è¶Šç•Œï¼Œä¹Ÿä¸é‡å¤å¤„ç†æˆ–é—æ¼ã€‚å¯¹äº 0-indexed çš„ç¬¬ $k$ å±‚ï¼Œå…¶ä¸Šè¾¹å…ƒç´ çš„åˆ—ç´¢å¼• $j$ åº”è¯¥ä» $k$ åˆ° $N-1-k-1$ã€‚</li>
                        <li><strong>â€œåŒæ—¶è¿›è¡Œâ€çš„ç†è§£ï¼š</strong>å¦‚æœç›´æ¥è¦†ç›–å¼èµ‹å€¼ï¼Œå¯èƒ½ä¼šå¯¼è‡´ä½¿ç”¨åˆ°å·²ç»è¢«å½“å‰å±‚æ“ä½œæ›´æ–°è¿‡çš„å€¼ã€‚å¿…é¡»ä½¿ç”¨å››ç‚¹äº¤æ¢ï¼ˆæˆ–ä¸´æ—¶æ•°ç»„ï¼‰æ¥ä¿è¯æ‰€æœ‰å€¼éƒ½åŸºäºå½“å‰å±‚æ“ä½œå‰çš„çŠ¶æ€ã€‚</li>
                    </ul>
                    <p><strong>ğŸ”„ å˜å¼æ€è€ƒï¼š</strong></p>
                    <ul>
                        <li><strong>é€†æ—¶é’ˆæ—‹è½¬ï¼š</strong>å¦‚æœè¦æ±‚é€†æ—¶é’ˆæ—‹è½¬ $90^\circ$ï¼Œå››ç‚¹äº¤æ¢çš„é¡ºåºä¼šæ”¹å˜ã€‚ä¾‹å¦‚ï¼Œ$(x, y)$ æ—‹è½¬åˆ° $(N+1-y, x)$ã€‚</li>
                        <li><strong>æ—‹è½¬ $180^\circ$ï¼š</strong>æ—‹è½¬ $180^\circ$ ç›¸å½“äºä¸¤æ¬¡ $90^\circ$ æ—‹è½¬ï¼Œæˆ–è€…ç›´æ¥å°† $(x, y)$ æ˜ å°„åˆ° $(N+1-x, N+1-y)$ã€‚è¿™å¯ä»¥é€šè¿‡ä¸¤ç‚¹äº¤æ¢å®ç°ã€‚</li>
                        <li><strong>åªæ—‹è½¬ç‰¹å®šåŒºåŸŸï¼š</strong>å¦‚æœé¢˜ç›®è¦æ±‚åªæ—‹è½¬ç½‘æ ¼ä¸­çš„ä¸€ä¸ªå­çŸ©å½¢åŒºåŸŸï¼Œåˆ™éœ€è¦è°ƒæ•´å¾ªç¯çš„èµ·å§‹å’Œç»“æŸè¾¹ç•Œã€‚</li>
                        <li><strong>æ—‹è½¬ä»»æ„è§’åº¦æˆ–æ›´å¤æ‚çš„å˜æ¢ï¼š</strong>è¿™é€šå¸¸éœ€è¦æ›´å¤æ‚çš„å‡ ä½•å˜æ¢çŸ¥è¯†ï¼Œå¯èƒ½æ¶‰åŠçŸ©é˜µä¹˜æ³•ç­‰ã€‚</li>
                    </ul>
                    <p><strong>ğŸ“š æ¨èé¢˜ç›®ï¼š</strong></p>
                    <ul>
                        <li><strong>LeetCode 48. Rotate Image (æ—‹è½¬å›¾åƒ)</strong> (æ¥æº: LeetCode) - æ¨èç†ç”±ï¼šç»å…¸çš„çŸ©é˜µåŸåœ°æ—‹è½¬é—®é¢˜ï¼Œä¸æœ¬é¢˜æ ¸å¿ƒæ“ä½œå®Œå…¨ä¸€è‡´ï¼Œæ˜¯ç†è§£çŸ©é˜µæ—‹è½¬çš„å…¥é—¨é¢˜ã€‚</li>
                        <li><strong>LeetCode 54. Spiral Matrix (èºæ—‹çŸ©é˜µ)</strong> (æ¥æº: LeetCode) - æ¨èç†ç”±ï¼šæ¶‰åŠåˆ†å±‚éå†çŸ©é˜µçš„æ€æƒ³ï¼Œä¸æœ¬é¢˜çš„åˆ†å±‚å¤„ç†æœ‰å¼‚æ›²åŒå·¥ä¹‹å¦™ï¼Œä½†æ“ä½œæ˜¯éå†è€Œéæ—‹è½¬ã€‚</li>
                        <li><strong>LeetCode 59. Spiral Matrix II (èºæ—‹çŸ©é˜µ II)</strong> (æ¥æº: LeetCode) - æ¨èç†ç”±ï¼šåœ¨èºæ—‹çŸ©é˜µçš„åŸºç¡€ä¸Šï¼Œè¦æ±‚æŒ‰èºæ—‹é¡ºåºå¡«å……æ•°å­—ï¼Œè¿›ä¸€æ­¥å·©å›ºåˆ†å±‚éå†å’Œè¾¹ç•Œå¤„ç†çš„æŠ€å·§ã€‚</li>
                    </ul>
                </div>
            </div>
        </div>

        <button id="prevBtn" class="nav-button">â€¹ ä¸Šä¸€é¡µ</button>
        <button id="nextBtn" class="nav-button">ä¸‹ä¸€é¡µ â€º</button>
        <div id="slideCounter">1 / 7</div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // 1. å…ˆåˆå§‹åŒ–ç¿»é¡µé€»è¾‘ï¼ˆæ ¸å¿ƒåŠŸèƒ½ï¼Œå¿…é¡»å…ˆæ‰§è¡Œï¼‰
            const slides = document.querySelectorAll('.slide');
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            const slideCounter = document.getElementById('slideCounter');
            let currentSlide = 0;
            const totalSlides = slides.length;

            function showSlide(index) {
                slides.forEach((slide, i) => slide.classList.toggle('active', i === index));
                currentSlide = index;
                prevBtn.disabled = currentSlide === 0;
                nextBtn.disabled = currentSlide === totalSlides - 1;
                slideCounter.textContent = `${currentSlide + 1} / ${totalSlides}`;
            }

            if(prevBtn && nextBtn) {
                prevBtn.addEventListener('click', () => currentSlide > 0 && showSlide(currentSlide - 1));
                nextBtn.addEventListener('click', () => currentSlide < totalSlides - 1 && showSlide(currentSlide + 1));
                document.addEventListener('keydown', (e) => {
                    if (e.key === 'ArrowLeft') prevBtn.click();
                    else if (e.key === 'ArrowRight') nextBtn.click();
                });
                showSlide(0);
            }

            // 2. å†å°è¯•æ¸²æŸ“å…¬å¼ï¼ˆåŠ ä¸Š try-catch å’Œ typeof æ£€æŸ¥ï¼‰
            try {
                if (typeof renderMathInElement !== 'undefined') {
                    renderMathInElement(document.body, {
                        delimiters: [
                            {left: '$$', right: '$$', display: true},
                            {left: '$', right: '$', display: false}
                        ],
                        throwOnError: false
                    });
                } else {
                    console.warn('KaTeX èµ„æºåŠ è½½å¤±è´¥ï¼Œå…¬å¼å°†æ˜¾ç¤ºä¸ºæºç ï¼Œä½†ä¸å½±å“ç¿»é¡µã€‚');
                }
            } catch (e) {
                console.error('å…¬å¼æ¸²æŸ“å‡ºé”™:', e);
            }

            // --- åŠ¨ç”»é€»è¾‘ ---
            let currentStep = 0;
            let totalSteps = 0; 
            
            const animArea = document.getElementById('animArea');
            const stepDesc = document.getElementById('stepDescription');
            const prevStepBtn = document.getElementById('prevStepBtn');
            const nextStepBtn = document.getElementById('nextStepBtn');
            const resetBtn = document.getElementById('resetBtn');

            // Sample grid for animation (N=4)
            const initialGrid = [
                ['.', '#', '.', '.'],
                ['#', '.', '.', '#'],
                ['.', '.', '#', '.'],
                ['.', '#', '.', '#']
            ];
            const N_anim = initialGrid.length; // N for animation

            // Helper to deep copy a grid
            function copyGrid(grid) {
                return grid.map(row => [...row]);
            }

            const steps = [];

            // Initial state
            let currentAnimGrid = copyGrid(initialGrid);
            steps.push({
                grid: copyGrid(currentAnimGrid),
                desc: `åˆå§‹ç½‘æ ¼çŠ¶æ€ã€‚ç½‘æ ¼å¤§å°ä¸º $N=${N_anim}$ã€‚`,
                highlight: []
            });

            // Simulate the algorithm to populate steps
            for (let i = 0; i < N_anim / 2; ++i) {
                steps.push({
                    grid: copyGrid(currentAnimGrid),
                    desc: `å¼€å§‹å¤„ç†ç¬¬ $${i+1}$ å±‚ (0-indexed: $i=${i}$)ã€‚è¯¥å±‚åŒ…å«ä» $(${i}, ${i})$ åˆ° $(${N_anim-1-i}, ${N_anim-1-i})$ çš„æ­£æ–¹å½¢åŒºåŸŸã€‚`,
                    highlight: []
                });

                for (let j = i; j < N_anim - 1 - i; ++j) {
                    const r1 = i, c1 = j; // P1: (k, j)
                    const r2 = N_anim - 1 - j, c2 = i; // P2: (N-1-j, k)
                    const r3 = N_anim - 1 - i, c3 = N_anim - 1 - j; // P3: (N-1-k, N-1-j)
                    const r4 = j, c4 = N_anim - 1 - i; // P4: (j, N-1-k)

                    const val1 = currentAnimGrid[r1][c1];
                    const val2 = currentAnimGrid[r2][c2];
                    const val3 = currentAnimGrid[r3][c3];
                    const val4 = currentAnimGrid[r4][c4];

                    steps.push({
                        grid: copyGrid(currentAnimGrid),
                        desc: `åœ¨ç¬¬ $${i+1}$ å±‚ï¼Œå¤„ç† $j=${j}$ã€‚\\
                               å³å°†è¿›è¡Œå››ç‚¹äº¤æ¢ï¼š\\
                               $P_1=(${r1}, ${c1})$ (å€¼:'${val1}'), \\
                               $P_2=(${r2}, ${c2})$ (å€¼:'${val2}'), \\
                               $P_3=(${r3}, ${c3})$ (å€¼:'${val3}'), \\
                               $P_4=(${r4}, ${c4})$ (å€¼:'${val4}')$ã€‚`,
                        highlight: [[r1, c1], [r2, c2], [r3, c3], [r4, c4]]
                    });

                    // Perform the swap on currentAnimGrid
                    const temp = currentAnimGrid[r1][c1];
                    currentAnimGrid[r1][c1] = currentAnimGrid[r2][c2];
                    currentAnimGrid[r2][c2] = currentAnimGrid[r3][c3];
                    currentAnimGrid[r3][c3] = currentAnimGrid[r4][c4];
                    currentAnimGrid[r4][c4] = temp;

                    steps.push({
                        grid: copyGrid(currentAnimGrid),
                        desc: `äº¤æ¢å®Œæˆã€‚\\
                               $P_1=(${r1}, ${c1})$ å˜ä¸º '${currentAnimGrid[r1][c1]}' (æ¥è‡ªæ—§ $P_2$), \\
                               $P_2=(${r2}, ${c2})$ å˜ä¸º '${currentAnimGrid[r2][c2]}' (æ¥è‡ªæ—§ $P_3$), \\
                               $P_3=(${r3}, ${c3})$ å˜ä¸º '${currentAnimGrid[r3][c3]}' (æ¥è‡ªæ—§ $P_4$), \\
                               $P_4=(${r4}, ${c4})$ å˜ä¸º '${currentAnimGrid[r4][c4]}' (æ¥è‡ªæ—§ $P_1$)$ã€‚`,
                        highlight: [[r1, c1], [r2, c2], [r3, c3], [r4, c4]]
                    });
                }
            }

            steps.push({
                grid: copyGrid(currentAnimGrid),
                desc: `æ‰€æœ‰å±‚å¤„ç†å®Œæ¯•ã€‚æœ€ç»ˆç½‘æ ¼çŠ¶æ€å¦‚ä¸‹ã€‚`,
                highlight: []
            });

            totalSteps = steps.length;

            function renderStep(stepIndex) {
                if (stepIndex < 0 || stepIndex >= totalSteps) return;

                const step = steps[stepIndex];
                stepDesc.innerHTML = step.desc;

                animArea.innerHTML = ''; // Clear previous content

                const gridContainer = document.createElement('div');
                gridContainer.className = 'grid-container';
                gridContainer.style.gridTemplateColumns = `repeat(${N_anim}, 50px)`;
                

                for (let r = 0; r < N_anim; ++r) {
                    for (let c = 0; c < N_anim; ++c) {
                        const cell = document.createElement('div');
                        cell.textContent = step.grid[r][c];
                        cell.className = 'grid-cell';
                        if (step.grid[r][c] === '#') {
                            cell.classList.add('black');
                        }

                        // Highlight cells
                        const isHighlighted = step.highlight.some(h => h[0] === r && h[1] === c);
                        if (isHighlighted) {
                            cell.classList.add('highlight');
                        }
                        gridContainer.appendChild(cell);
                    }
                }
                animArea.appendChild(gridContainer);
            }

            function updateControls() {
                if (!prevStepBtn || !nextStepBtn) return;
                prevStepBtn.disabled = currentStep <= 0;
                nextStepBtn.disabled = currentStep >= totalSteps - 1;
                
                if (typeof renderStep === 'function') {
                    renderStep(currentStep);
                    // æ¸²æŸ“åŠ¨æ€å†…å®¹ä¸­çš„å…¬å¼
                    if (typeof renderMathInElement !== 'undefined') {
                        const mathOptions = {
                            delimiters: [
                                {left: '$$', right: '$$', display: true},
                                {left: '$', right: '$', display: false}
                            ],
                            throwOnError: false
                        };
                        if(animArea) renderMathInElement(animArea, mathOptions);
                        if(stepDesc) renderMathInElement(stepDesc, mathOptions);
                    }
                }
            }

            if (prevStepBtn) {
                prevStepBtn.addEventListener('click', () => {
                    if (currentStep > 0) {
                        currentStep--;
                        updateControls();
                    }
                });
            }

            if (nextStepBtn) {
                nextStepBtn.addEventListener('click', () => {
                    if (currentStep < totalSteps - 1) {
                        currentStep++;
                        updateControls();
                    }
                });
            }

            if (resetBtn) {
                resetBtn.addEventListener('click', () => {
                    currentStep = 0;
                    updateControls();
                });
            }

            // Initial call to render the first step
            updateControls();
        });
    </script>
</body>
</html>